{"version":3,"sources":["webpack:///./src/main.js","webpack:///external \"jQuery\"","webpack:///./src/sharing/format.js","webpack:///./src/storage.js","webpack:///external \"Promise\"","webpack:///./src/TMDocument.js","webpack:///./src/examples.js","webpack:///./src/parser.js","webpack:///./src/sharing/gist.js","webpack:///./src/sharing/import.js","webpack:///external \"ace\"","webpack:///external \"jsyaml\"","webpack:///./src/examples/_template.yaml","webpack:///./src/examples/binaryAdd.yaml","webpack:///./src/examples/binaryIncrement.yaml","webpack:///./src/examples/binaryMult.yaml","webpack:///./src/examples/busyBeaver3.yaml","webpack:///./src/examples/busyBeaver4.yaml","webpack:///./src/examples/copy1s.yaml","webpack:///./src/examples/divisibleBy3.yaml","webpack:///./src/examples/divisibleBy3Base10.yaml","webpack:///./src/examples/lengthMult.yaml","webpack:///./src/examples/matchBinaryStrings.yaml","webpack:///./src/examples/matchThreeLengths.yaml","webpack:///./src/examples/palindrome.yaml","webpack:///./src/examples/powersOfTwo.yaml","webpack:///./src/examples/repeat01.yaml","webpack:///./src/examples/unaryMult.yaml","webpack:///./src/DocumentMenu.js","webpack:///./src/TMDocumentController.js","webpack:///./src/TMSimulator.js","webpack:///^\\.\\/.*\\.yaml$","webpack:///./src/kbdshortcuts.js","webpack:///./src/sharing/CheckboxTable.js","webpack:///./src/sharing/FileReaderPromise.js","webpack:///./src/sharing/export-panel.js","webpack:///./src/sharing/import-panel.js","webpack:///external \"Clipboard\""],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gCAA0B;;AAE1B;AACA;AACA;;AAEA,qBAAoB,oCAAoC;;AAExD;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qEAAoE;AACpE;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,EAAC;;;AAGD;AACA;AACA;;AAEA;AACA;AACA,wBAAuB,2BAA2B;AAClD;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,yBAAwB;AACxB;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,EAAC;;;AAGD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,EAAC;;;AAGD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAwC;AACxC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA,wCAAuC;AACvC;AACA;AACA,2CAA0C,aAAa;AACvD;;AAEA;AACA,uBAAsB,aAAa;AACnC;AACA,2CAA0C;AAC1C;AACA;AACA;AACA;;AAEA;AACA,KAAI,2DAA2D;AAC/D,IAAG;AACH;AACA;AACA;AACA;;AAEA,4BAA2B,gBAAgB;AAC3C;AACA;AACA,UAAS;AACT,MAAK;AACL,IAAG;AACH,EAAC;;;AAGD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C,cAAc;AACxD;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,EAAC;;AAED;AACA;AACA;AACA,aAAY,8BAA8B;AAC1C;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAO;AACP;AACA,IAAG;AACH,EAAC;;AAED;AACA;;;;;;;;;;AC/WA,yB;;;;;;ACAA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAI,wBAAwB;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,aAAY,WAAW;AACvB,aAAY;AACZ;AACA;AACA;AACA,0BAAyB,kBAAkB,EAAE;AAC7C;AACA;AACA,UAAS;AACT,UAAS;AACT,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,aAAY,OAAO;AACnB,aAAY,OAAO;AACnB,aAAY,cAAc;AAC1B,aAAY,UAAU;AACtB;AACA;AACA;AACA;AACA;AACA,wBAAuB,kCAAkC;AACzD,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;;ACnGA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA,mBAAkB,gCAAgC,EAAE;AACpD,wBAAuB,6DAA6D,EAAE;AACtF,8BAA6B,UAAU,iDAAiD,EAAE;AAC1F,mCAAkC,wBAAwB,EAAE;AAC5D,iCAAgC,iBAAiB,EAAE;AACnD,yBAAwB,UAAU;AAClC,IAAG;AACH,EAAC;;AAED;AACA;;AAEA;AACA;AACA,oBAAmB,mCAAmC;AACtD,oBAAmB,cAAc;;AAEjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,uBAAsB;AACtB;AACA;AACA;AACA;AACA,EAAC;;;AAGD;AACA;;;;;;;ACnEA,0B;;;;;;ACAA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA,cAAa,eAAe;AAC5B,cAAa,wBAAwB;AACrC,iBAAgB;AAChB,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA0B,oBAAoB,EAAE;AAChD,4BAA2B;AAC3B;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,yBAAwB,8BAA8B,EAAE;AACxD,4BAA2B,6BAA6B,EAAE;AAC1D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,QAAO;AACP;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA,mBAAkB;AAClB;;AAEA;;AAEA;AACA;AACA,aAAY,QAAQ;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,SAAS;AACpB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;AC1JA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAC;AACD;;;AAGA;AACA,YAAW;AACX;;AAEA;AACA;AACA;;AAEA,8CAA6C,gBAAgB,EAAE;;;AAG/D;AACA;AACA;AACA;AACA;;;;;;;ACnDA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA,YAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,yBAAwB,mCAAmC;AAC3D;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB,gBAAgB,EAAE;AAC3C,oBAAmB,gCAAgC;AACnD;AACA,IAAG;AACH;AACA,EAAC;;AAED,4BAA2B,iBAAiB,sBAAsB;AAClE,mBAAkB;;AAElB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB;AACpB,MAAK;AACL,wEAAuE,EAAE;AACzE,0BAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK,0DAA0D;AAC/D;AACA;AACA;AACA,6BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAK,oDAAoD;AACzD;AACA;AACA;AACA,QAAO;AACP,wGAAuG;AACvG;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,kCAAiC,UAAU,UAAU;AACrD;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA,mBAAkB,sBAAsB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,0GAAyG;AACzG;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;;AAEA;AACA,sCAAqC;AACrC;AACA,kCAAiC,yCAAyC;AAC1E,mBAAkB,kBAAkB,EAAE;AACtC;;AAEA;AACA;AACA,gDAA+C;AAC/C,gHAA+G;AAC/G;AACA;AACA;;AAEA;AACA,uBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,gDAA+C,UAAU,gBAAgB,uBAAuB,UAAU;AAC1G;AACA,IAAG;AACH;;AAEA,+BAA8B,uBAAuB;AACrD,gCAA+B,wBAAwB;;AAEvD;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,iDAAgD,MAAM;AACtD,mCAAkC,sBAAsB;AACxD;AACA,MAAK;AACL,gFAA+E;AAC/E;;AAEA,sBAAqB,wBAAwB,IAAI;AACjD;AACA;AACA;AACA,qBAAoB,8CAA8C;AAClE;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,UAAS;AACT;AACA,4DAA2D;AAC3D;AACA,IAAG;AACH;AACA;AACA;AACA,MAAK,kFAAkF;AACvF;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;ACtQA;;AAEA;AACA,sCAAkC;;AAElC;AACA;AACA,EAAC;;AAED;AACA,yCAAwC,0CAA0C;AAClF;AACA;AACA;AACA;AACA;AACA,eAAc,mDAAmD;AACjE,MAAK;AACL;AACA,YAAW,aAAa,EAAE,YAAY;AACtC,MAAK;AACL,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA,KAAI,QAAQ,qBAAqB,iBAAiB;AAClD,4CAA2C;AAC3C;AACA,kCAAiC,qBAAqB;AACtD;AACA;AACA;AACA;AACA,kBAAiB,gCAAgC;AACjD;AACA;AACA,IAAG;AACH;;AAEA;AACA;;;;;;;ACpDA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,sCAAkC;;;AAGlC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,kEAAkE;AAC/E;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,uBAAsB,oCAAoC;AAC1D;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,mBAAkB,8BAA8B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAmB;AACnB,8CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA,cAAa;AACb,UAAS;AACT;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,wBAAuB,wCAAwC,EAAE;AACjE,MAAK;AACL,IAAG;AACH,8CAA6C;AAC7C;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB,mBAAkB;;AAElB;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAsB;AACtB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA,2CAA0C;AAC1C;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,QAAO;AACP,sBAAqB;AACrB;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA,QAAO;AACP;AACA,IAAG,UAAU,mDAAmD;AAChE;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,KAAI;AACJ,8EAA6E;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,cAAa,0CAA0C;AACvD;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA,cAAa,kEAAkE;AAC/E;AACA;AACA;AACA,2CAA0C,0BAA0B;AACpE;AACA;AACA,oCAAmC,iCAAiC,EAAE;AACtE;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;;AAEA,KAAI,0EAA0E;AAC9E;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAI,qCAAqC;AACzC;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA,KAAI,mCAAmC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK,iEAAiE;AACtE,KAAI,kEAAkE;AACtE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAA+B,0CAA0C;AACzE;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA,KAAI,iEAAiE;AACrE;;AAEA,KAAI,kEAAkE;AACtE;;AAEA;AACA;AACA;AACA;AACA;;AAEA,MAAK,WAAW;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAI,iDAAiD;AACrD;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,0BAAyB,eAAe;AACxC;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;ACnhBA,sB;;;;;;ACAA,yB;;;;;;;;ACAA,6BAA4B,EAAE,aAAa,IAAI,kBAAkB,QAAQ,cAAc,EAAE,SAAS,EAAE,G;;;;;;ACApG,mZAAkZ,QAAQ,uHAAuH,mBAAmB,YAAY,mBAAmB,YAAY,uBAAuB,iIAAiI,cAAc,SAAS,cAAc,cAAc,SAAS,6BAA6B,mBAAmB,kBAAkB,mBAAmB,+CAA+C,mBAAmB,kBAAkB,mBAAmB,gDAAgD,mBAAmB,kBAAkB,YAAY,sHAAsH,kBAAkB,8CAA8C,kBAAkB,oFAAoF,YAAY,YAAY,YAAY,8BAA8B,QAAQ,4XAA4X,eAAe,cAAc,eAAe,cAAc,eAAe,eAAe,eAAe,aAAa,eAAe,aAAa,eAAe,aAAa,eAAe,eAAe,eAAe,aAAa,eAAe,aAAa,eAAe,aAAa,eAAe,G;;;;;;ACA/kE,uOAAsO,SAAS,sDAAsD,YAAY,kBAAkB,kBAAkB,kkBAAkkB,eAAe,YAAY,eAAe,WAAW,eAAe,G;;;;;;ACA39B,kWAAiW,QAAQ,yBAAyB,qBAAqB,8CAA8C,SAAS,0LAA0L,uBAAuB,YAAY,oBAAoB,yCAAyC,QAAQ,2GAA2G,mBAAmB,iEAAiE,mBAAmB,kFAAkF,sBAAsB,YAAY,sBAAsB,cAAc,QAAQ,uDAAuD,UAAU,cAAc,oBAAoB,cAAc,mBAAmB,2BAA2B,oBAAoB,cAAc,UAAU,cAAc,mBAAmB,6BAA6B,cAAc,YAAY,oBAAoB,yLAAyL,mBAAmB,YAAY,mBAAmB,YAAY,WAAW,2BAA2B,cAAc,SAAS,cAAc,cAAc,SAAS,6BAA6B,mBAAmB,kBAAkB,mBAAmB,+CAA+C,mBAAmB,kBAAkB,mBAAmB,gDAAgD,mBAAmB,kBAAkB,YAAY,8CAA8C,kBAAkB,8CAA8C,kBAAkB,0BAA0B,YAAY,YAAY,YAAY,8BAA8B,UAAU,2nBAA2nB,cAAc,aAAa,cAAc,aAAa,cAAc,aAAa,eAAe,eAAe,eAAe,aAAa,eAAe,aAAa,cAAc,aAAa,eAAe,eAAe,eAAe,aAAa,eAAe,cAAc,eAAe,gBAAgB,eAAe,aAAa,eAAe,eAAe,eAAe,aAAa,eAAe,aAAa,eAAe,aAAa,eAAe,eAAe,eAAe,aAAa,eAAe,aAAa,eAAe,aAAa,eAAe,G;;;;;;ACAv7G,wnBAAunB,eAAe,YAAY,KAAK,oBAAoB,eAAe,gCAAgC,eAAe,YAAY,KAAK,wKAAwK,eAAe,cAAc,KAAK,wBAAwB,eAAe,cAAc,eAAe,wBAAwB,YAAY,cAAc,KAAK,ghBAAghB,mBAAmB,QAAQ,mBAAmB,QAAQ,mBAAmB,QAAQ,mBAAmB,G;;;;;;ACAnrD,uQAAsQ,IAAI,eAAe,gBAAgB,MAAM,UAAU,IAAI,eAAe,MAAM,gBAAgB,UAAU,IAAI,eAAe,gBAAgB,MAAM,UAAU,IAAI,eAAe,MAAM,gBAAgB,urCAAurC,eAAe,QAAQ,eAAe,UAAU,eAAe,QAAQ,eAAe,QAAQ,eAAe,G;;;;;;ACA5uD,kNAAiN,KAAK,YAAY,iBAAiB,mDAAmD,OAAO,mFAAmF,kBAAkB,kEAAkE,QAAQ,6GAA6G,kBAAkB,iUAAiU,kBAAkB,WAAW,kBAAkB,WAAW,kBAAkB,WAAW,kBAAkB,WAAW,kBAAkB,WAAW,kBAAkB,G;;;;;;ACA/jC,kvBAAivB,MAAM,4BAA4B,UAAU,qBAAqB,MAAM,0BAA0B,MAAM,mCAAmC,MAAM,0BAA0B,MAAM,6hBAA6hB,eAAe,SAAS,eAAe,SAAS,eAAe,aAAa,kBAAkB,G;;;;;;ACA5hD,usBAAssB,MAAM,8BAA8B,MAAM,0BAA0B,UAAU,+DAA+D,MAAM,8BAA8B,MAAM,2EAA2E,MAAM,8BAA8B,MAAM,4SAA4S,oBAAoB,SAAS,oBAAoB,SAAS,oBAAoB,aAAa,kBAAkB,G;;;;;;ACA34C,uFAAsF,0CAA0C,8TAA8T,YAAY,OAAO,eAAe,YAAY,OAAO,eAAe,YAAY,OAAO,eAAe,YAAY,SAAS,2CAA2C,SAAS,iOAAiO,qBAAqB,YAAY,QAAQ,oCAAoC,mBAAmB,YAAY,SAAS,wCAAwC,mBAAmB,wCAAwC,SAAS,oCAAoC,YAAY,cAAc,SAAS,2CAA2C,UAAU,sCAAsC,cAAc,aAAa,eAAe,aAAa,eAAe,aAAa,eAAe,aAAa,eAAe,eAAe,cAAc,aAAa,eAAe,aAAa,eAAe,aAAa,eAAe,eAAe,eAAe,aAAa,eAAe,aAAa,eAAe,G;;;;;;ACAthD,kFAAiF,YAAY,IAAI,GAAG,uWAAuW,qBAAqB,YAAY,qBAAqB,gDAAgD,SAAS,0CAA0C,UAAU,0CAA0C,UAAU,qCAAqC,kBAAkB,qCAAqC,kBAAkB,+CAA+C,SAAS,sCAAsC,UAAU,wOAAwO,+LAA+L,eAAe,aAAa,eAAe,uDAAuD,eAAe,aAAa,eAAe,aAAa,kBAAkB,aAAa,kBAAkB,aAAa,kBAAkB,aAAa,kBAAkB,G;;;;;;ACAxiD,wFAAuF,iBAAiB,6YAA6Y,gBAAgB,YAAY,QAAQ,qCAAqC,gBAAgB,qCAAqC,kBAAkB,2CAA2C,MAAM,yCAAyC,UAAU,yaAAya,eAAe,SAAS,eAAe,SAAS,eAAe,aAAa,eAAe,aAAa,eAAe,aAAa,eAAe,G;;;;;;ACAryC,oNAAmN,UAAU,eAAe,UAAU,yKAAyK,qBAAqB,YAAY,qBAAqB,4EAA4E,UAAU,0CAA0C,UAAU,yBAAyB,oBAAoB,yHAAyH,oBAAoB,uGAAuG,SAAS,4LAA4L,eAAe,aAAa,eAAe,aAAa,eAAe,eAAe,eAAe,aAAa,eAAe,aAAa,eAAe,eAAe,cAAc,aAAa,eAAe,G;;;;;;ACA3xC,wcAAuc,UAAU,eAAe,UAAU,ufAAuf,mBAAmB,uFAAuF,kBAAkB,yHAAyH,OAAO,cAAc,QAAQ,8EAA8E,kBAAkB,0FAA0F,OAAO,mEAAmE,eAAe,aAAa,eAAe,aAAa,eAAe,eAAe,eAAe,aAAa,eAAe,aAAa,eAAe,aAAa,eAAe,G;;;;;;ACAhrD,sVAAqV,eAAe,gCAAgC,KAAK,sBAAsB,eAAe,gCAAgC,KAAK,kPAAkP,6BAA6B,QAAQ,6BAA6B,QAAQ,6BAA6B,QAAQ,6BAA6B,G;;;;;;ACAj1B,icAAgc,mBAAmB,wCAAwC,QAAQ,2EAA2E,SAAS,8DAA8D,qBAAqB,6DAA6D,QAAQ,yGAAyG,SAAS,cAAc,mBAAmB,wBAAwB,OAAO,sCAAsC,oBAAoB,uCAAuC,SAAS,wCAAwC,qBAAqB,yCAAyC,eAAe,aAAa,eAAe,aAAa,eAAe,YAAY,eAAe,YAAY,eAAe,cAAc,eAAe,aAAa,eAAe,eAAe,cAAc,aAAa,cAAc,aAAa,eAAe,G;;;;;;ACA33C;;AAEA;AACA;AACA;AACA;AACA,gDAA6C;;AAE7C;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW;AACX;AACA,YAAW,MAAM;AACjB,YAAW,OAAO;AAClB,YAAW;AACX;AACA,YAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0CAAyC,aAAa;AACtD,IAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,EAAC;;AAED;AACA;;AAEA;AACA,gDAA+C,iBAAiB,EAAE;;AAElE;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,yDAAwD,eAAe;AACvE;AACA,4CAA2C,eAAe;AAC1D;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,+DAA8D,aAAa;AAC3E;;AAEA;;AAEA;AACA,gEAA+D,kBAAkB;AACjF;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAkD,eAAe;AACjE;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,wBAAuB,UAAU;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,aAAY,OAAO;AACnB,aAAY,QAAQ;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAsB,oBAAoB,EAAE;AAC5C;AACA;AACA,EAAC;;AAED;;;;;;;ACxQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oCAAmC,iBAAiB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA,kC;AACA;AACA,sB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA,YAAW,eAAe;AAC1B,YAAW,eAAe;AAC1B,YAAW,eAAe;AAC1B,YAAW,OAAO;AAClB,YAAW,kBAAkB;AAC7B,YAAW,kBAAkB;AAC7B,YAAW,kBAAkB;AAC7B,YAAW,kBAAkB;AAC7B,YAAW,kBAAkB;AAC7B,YAAW,WAAW;AACtB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,2BAA0B,0CAA0C;AACpE,2BAA0B,uDAAuD;AACjF;AACA;AACA;AACA,2BAA0B,gBAAgB;AAC1C,2BAA0B,4DAA4D;AACtF;AACA,uDAAsD;AACtD;AACA;AACA;AACA,+BAA8B,YAAY,GAAG,WAAW,GAAG,YAAY,GAAG,UAAU,GAAG,cAAc;AACrG,YAAW;AACX;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,QAAO;;AAEP;AACA;AACA,eAAc,WAAW;AACzB;AACA,MAAK;AACL,kBAAiB,iBAAiB;AAClC,kBAAiB,oBAAoB;AACrC,kBAAiB;AACjB,IAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0CAAyC,QAAQ,EAAE;AACnD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iCAAgC,kBAAkB,EAAE,EAAE;;AAEtD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAsC,gCAAgC;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,MAAK;AACL,2BAA0B,UAAU,EAAE;AACtC;AACA;;;AAGA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,IAAG;AACH,qBAAoB,wBAAwB;AAC5C,EAAC;;AAED;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,QAAQ;AACpB;AACA;AACA,wBAAuB,2BAA2B;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC/XA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,6BAA4B;AAC5B,QAAO;AACP;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,wCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,IAAG;AACH;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAoC,sBAAsB,EAAE;AAC5D;;AAEA;;;;;;;ACvJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAiC,uDAAuD;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC7BA;AACA;AACA;AACA;;AAEA;;AAEA,uBAAsB,UAAU;;AAEhC;AACA;AACA,aAAY,aAAa;AACzB,aAAY,iBAAiB;AAC7B,aAAY,YAAY;AACxB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;;AAEA;AACA;AACA,MAAK;AACL;AACA,MAAK,gDAAgD;AACrD,MAAK,2CAA2C;AAChD,MAAK;AACL;AACA,MAAK,4CAA4C;AACjD,MAAK,gDAAgD;AACrD,MAAK;AACL;AACA,MAAK,wIAAwI;AAC7I,MAAK,6BAA6B;AAClC,MAAK;AACL;AACA;;;AAGA;;;;;;;ACvGA;;AAEA;AACA,gCAA0B;;AAE1B,uBAAsB,UAAU;AAChC,uBAAsB,iBAAiB;;AAEvC;AACA;AACA;AACA,YAAW,8BAA8B;AACzC,YAAW,SAAS;AACpB,YAAW,WAAW;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAW,WAAW;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,wBAAuB,gBAAgB,EAAE;AACzC;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;AC9HA;;AAEA;AACA,sCAAkC;;AAElC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA,YAAW,gBAAgB,EAAE,YAAY;AACzC,MAAK;;AAEL;AACA,IAAG;AACH;;AAEA;;;;;;;ACzBA;;AAEA;AACA;AACA;AACA;AACA,gCAA0B;;AAE1B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA,qCAAoC,sCAAsC;AAC1E;;;AAGA;AACA;AACA;;AAEA;AACA;AACA,aAAY,YAAY;AACxB,aAAY,kBAAkB;AAC9B,aAAY,OAAO;AACnB,aAAY,OAAO;AACnB,aAAY,QAAQ;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA,cAAa;AACb;AACA;AACA;AACA,8BAA6B;;AAE7B;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA,iCAAgC;AAChC;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,cAAa,sBAAsB,EAAE,YAAY;AACjD;AACA,oBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;;;;;;;AC9NA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAI,iEAAiE;AACrE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA,oCAAmC,eAAe;AAClD,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA2C,uBAAuB;AAClE,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,UAAS,cAAc,iDAAiD;AACxE,sDAAqD;AACrD;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa,sCAAsC;AACnD,8CAA6C;AAC7C;AACA;;AAEA;AACA,MAAK,0CAA0C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,cAAc;AAC3B;AACA;AACA;AACA,QAAO;;AAEP;AACA;AACA;AACA,gBAAe,2CAA2C;AAC1D;AACA;AACA;AACA;AACA,2BAA0B;AAC1B,UAAS;AACT;AACA,mDAAkD;AAClD;AACA,MAAK;AACL;AACA,qDAAoD;AACpD,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAiB,qBAAqB;AACtC;AACA;AACA,IAAG;AACH,kBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;;;;;;;;;;;ACpJA,4B","file":"main.bundle.js","sourcesContent":["// main entry point for index.html.\n// important: make sure to coordinate variables and elements between the HTML and JS\n'use strict';\n\n/* eslint-env browser */\nvar TMDocumentController = require('./TMDocumentController'),\n    DocumentMenu = require('./DocumentMenu'),\n    examples = require('./examples'),\n    toDocFragment = require('./util').toDocFragment;\nvar ace = require('ace-builds/src-min-noconflict');\nvar $ = require('jquery'); // for Bootstrap modal dialog events\n\n// load up front so going offline doesn't break anything\n// (for snippet placeholders, used by \"New blank document\")\nace.config.loadModule('ace/ext/language_tools');\n\nfunction getId(id) { return document.getElementById(id); }\n\nfunction addAlertPane(type, html) {\n  getId('diagram-column').insertAdjacentHTML('afterbegin',\n    '<div class=\"alert alert-'+type+' alert-dismissible\" role=\"alert\">' +\n    '<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">×</span></button>' +\n    html +\n    '</div>');\n}\n\n\n//////////////////////////\n// Compatibility Checks //\n//////////////////////////\n\n(function () {\n  // Warn when falling back to RAM-only storage\n  // NB. This mainly covers local storage errors and Safari's Private Browsing.\n  if (!require('./storage').canUseLocalStorage) {\n    addAlertPane('info', '<p>Local storage is unavailable. ' +\n      'Your browser could be in Private Browsing mode, or it might not support <a href=\"http://caniuse.com/#feat=namevalue-storage\" target=\"_blank\">local storage</a>.</p>' +\n      '<strong>Any changes will be lost after leaving the webpage.</strong>');\n  }\n\n  /*\n  Warn for IE 10 and under, which misbehave and lack certain features.\n  Examples:\n    • IE 9 and under don't support .classList.\n    • IE 10's \"storage event is fired even on the originating document where it occurred.\"\n      http://caniuse.com/#feat=namevalue-storage\n  */\n\n  // Detect IE 10 and under (http://stackoverflow.com/a/16135889)\n  var isIEUnder11 = new Function('/*@cc_on return @_jscript_version; @*/')() < 11;\n  if (isIEUnder11) {\n    addAlertPane('warning',\n      '<p><strong>Your <a href=\"http://whatbrowser.org\" target=\"_blank\">web browser</a> is out of date</strong> and does not support some features used by this program.<br>' +\n      '<em>The page may not work correctly, and data may be lost.</em></p>' +\n      'Please update your browser, or use another browser such as <a href=\"http://www.google.com/chrome/browser/\" target=\"_blank\">Chrome</a> or <a href=\"http://getfirefox.com\" target=\"_blank\">Firefox</a>.');\n  }\n\n  // Warn about iOS local storage volatility\n  $(function () {\n    // Detect iOS (http://stackoverflow.com/a/9039885)\n    var isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n    if (isIOS) {\n      getId('misc-tips-list').insertAdjacentHTML('afterbegin',\n        '<li><strong class=\"text-warning\">Important note for iOS</strong>: ' +\n        'iOS saves browser local storage in the cache folder, which is <strong>not backed up</strong>, and is ' +\n        '<q cite=\"https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API#Browser_compatibility\"><strong>subject to occasional clean up</strong>, ' +\n        'at the behest of the OS, typically if space is short.</q></li>');\n    }\n  });\n}());\n\n\n/////////////////////\n// Import & Export //\n/////////////////////\n\nfunction importDocument(obj) {\n  // duplicate data into the menu, then open it.\n  menu.duplicate(obj, {select: true, type: 'open'});\n}\n\n$(function () {\n  // Enable buttons now that handlers are ready\n  $('.tm-needsready').prop('disabled', false);\n\n  // Run import from URL query (if any)\n  var importArgs = {\n    dialogNode: getId('importDialog'),\n    importDocument: importDocument\n  };\n  require('./sharing/import').runImport(importArgs);\n  // Init import dialog\n  var $importPanel = $('#importPanel');\n  $importPanel.one('show.bs.modal', function () {\n    require('./sharing/import-panel').init({\n      $dialog: $importPanel,\n      gistIDForm: getId('gistIDForm'),\n      importArgs: importArgs\n    });\n  });\n  // Init export dialog\n  var exportPanel = getId('exportPanel');\n  require('./sharing/export-panel').init({\n    $dialog: $(exportPanel),\n    getCurrentDocument: function () {\n      controller.save(); // IMPORTANT: save changes, otherwise data model is out of date\n      return menu.currentDocument;\n    },\n    getIsSynced: controller.getIsSynced.bind(controller),\n    gistContainer: getId('shareGistContainer'),\n    downloadContainer: getId('exportDownloadContainer'),\n    copyContentsButton: getId('copyContentsButton'),\n    textarea: exportPanel.querySelector('textarea')\n  });\n});\n\n\n///////////////////\n// Document List //\n///////////////////\n\nvar menu = (function () {\n  var select = document.getElementById('tm-doc-menu');\n  // Group: Documents\n  var docGroup = document.createElement('optgroup');\n  docGroup.label = 'Documents';\n  select.appendChild(docGroup);\n  // Group: Examples\n  var exampleGroup = document.createElement('optgroup');\n  exampleGroup.label = 'Examples';\n  exampleGroup.appendChild(toDocFragment(examples.list.map(\n    DocumentMenu.prototype.optionFromDocument)));\n  select.appendChild(exampleGroup);\n\n  return new DocumentMenu({\n    menu: select,\n    group: docGroup,\n    storagePrefix: 'tm.docs',\n    firsttimeDocID: examples.firsttimeDocID\n  });\n})();\n\n\n/////////////////\n// \"Edit\" Menu //\n/////////////////\n\n(function () {\n  menu.onChange = function (doc, opts) {\n    switch (opts && opts.type) {\n      case 'duplicate':\n        controller.setBackingDocument(doc);\n        break;\n      case 'delete':\n        controller.forceLoadDocument(doc);\n        break;\n      default:\n        controller.openDocument(doc);\n    }\n    refreshEditMenu();\n  };\n\n  // Refresh the \"Edit\" menu items depending on document vs. example.\n  var refreshEditMenu = (function () {\n    var renameLink = document.querySelector('[data-target=\"#renameDialog\"]');\n    var deleteLink = document.querySelector('[data-target=\"#deleteDialog\"]');\n    var wasExample;\n    function renameExample() {\n      // duplicate, then rename the duplicate.\n      // how it works: switch to duplicate document ->\n      //   refreshEditMenu() enables rename dialog -> event bubbles up -> dialog opens.\n      // this might be the simplest way; Event.stopPropagation leaves the dropdown hanging.\n      duplicateDocument();\n    }\n\n    return function () {\n      var isExample = menu.currentDocument.isExample;\n      if (wasExample !== isExample) {\n        if (!isExample) {\n          renameLink.textContent = 'Rename…';\n          renameLink.removeEventListener('click', renameExample);\n          renameLink.setAttribute('data-toggle', 'modal');\n          deleteLink.textContent = 'Delete…';\n          deleteLink.setAttribute('data-target', '#deleteDialog');\n        } else {\n          renameLink.textContent = 'Rename a copy…';\n          renameLink.addEventListener('click', renameExample);\n          renameLink.removeAttribute('data-toggle');\n          deleteLink.textContent = 'Reset this example…';\n          deleteLink.setAttribute('data-target', '#resetExampleDialog');\n        }\n        wasExample = isExample;\n      }\n    };\n  }());\n  refreshEditMenu();\n\n  // only swap out the storage backing; don't affect views or undo history\n  function duplicateDocument() {\n    controller.save();\n    menu.duplicate(menu.currentDocument, {select: true});\n  }\n\n  function newBlankDocument() {\n    menu.newDocument({select: true});\n    // load up starter template\n    if (controller.editor.insertSnippet) { // async loaded\n      controller.editor.insertSnippet(examples.blankTemplate);\n      controller.loadEditorSource();\n    }\n  }\n\n  var $renameDialog = $(getId('renameDialog'));\n  [{id: 'tm-doc-action-duplicate', callback: duplicateDocument},\n  {id: 'tm-doc-action-newblank', callback: newBlankDocument}\n  ].forEach(function (item) {\n    document.getElementById(item.id).addEventListener('click', function (e) {\n      e.preventDefault();\n      item.callback(e);\n\n      $renameDialog.modal({keyboard: false})\n        .one('hidden.bs.modal', function () {\n          controller.editor.focus();\n        });\n    });\n  });\n}());\n\n\n/////////////\n// Dialogs //\n/////////////\n\n(function () {\n  // Rename\n  var $renameDialog = $(getId('renameDialog'));\n  var renameBox = getId('renameDialogInput');\n  $renameDialog\n    .on('show.bs.modal', function () {\n      renameBox.value = menu.currentOption.text;\n    })\n    .on('shown.bs.modal', function () {\n      renameBox.select();\n    })\n    // NB. remember data-keyboard=\"false\" on the triggering element,\n    // to prevent closing with Esc and causing a save.\n    // remark: an exception thrown on 'hide' prevents the dialog from closing,\n    // so save during 'hidden' instead.\n    .on('hidden.bs.modal', function () {\n      var newName = renameBox.value;\n      if (menu.currentOption.text !== newName) {\n        menu.rename(newName);\n      }\n      renameBox.value = '';\n    });\n  document.getElementById('renameDialogForm').addEventListener('submit', function (e) {\n    e.preventDefault();\n    $renameDialog.modal('hide');\n  });\n\n  // Delete\n  function deleteDocument() {\n    menu.delete();\n  }\n  document.getElementById('tm-doc-action-delete').addEventListener('click', deleteDocument);\n\n  // Reset Example\n  function discardReset() {\n    menu.delete();\n    // load manually since example stays and selection doesn't change\n    controller.forceLoadDocument(menu.currentDocument);\n  }\n  function saveReset() {\n    menu.duplicate(menu.currentDocument, {select: false});\n    discardReset();\n  }\n  document.getElementById('tm-doc-action-resetdiscard').addEventListener('click', discardReset);\n  document.getElementById('tm-doc-action-resetsave').addEventListener('click', saveReset);\n}());\n\n////////////////\n// Controller //\n////////////////\n\nvar controller = (function () {\n  function getButton(container, type) {\n    return container.querySelector('button.tm-' + type);\n  }\n  var editor = document.getElementById('editor-container');\n  // button containers\n  var sim = document.getElementById('controls-container');\n  var ed = editor.parentNode;\n\n  return new TMDocumentController({\n    simulator: document.getElementById('machine-container'),\n    editorAlerts: document.getElementById('editor-alerts-container'),\n    editor: editor\n  }, {\n    simulator: {\n      run: getButton(sim, 'run'),\n      step: getButton(sim, 'step'),\n      reset: getButton(sim, 'reset')\n    },\n    editor: {\n      load: getButton(ed, 'editor-load'),\n      export: getButton(ed, 'editor-export'),\n      revert: getButton(ed, 'editor-revert')\n    }\n  }, menu.currentDocument);\n}());\n\ncontroller.editor.setTheme('ace/theme/chrome');\ncontroller.editor.commands.addCommand({\n  name: 'save',\n  bindKey: { mac: 'Cmd-S', win: 'Ctrl-S' },\n  exec: function () {\n    controller.loadEditorSource();\n  }\n});\ncontroller.editor.session.setUseWrapMode(true);\n$(function () {\n  try {\n    require('./kbdshortcuts').main(controller.editor.commands,\n      getId('kbdShortcutTable')\n    );\n  } catch (e) {\n    /* */\n  }\n});\n\nwindow.addEventListener('beforeunload', function (ev) {\n  try {\n    controller.save();\n    menu.saveCurrentDocID();\n  } catch (error) {\n    addAlertPane('warning',\n      '<h4>The current document could not be saved.</h4>'+\n      '<p>It’s likely that the <a href=\"https://en.wikipedia.org/wiki/Web_storage#Storage_size\" target=\"_blank\">local storage quota</a> was exceeded. ' +\n      'Try downloading a copy of this document, then deleting other documents to make space.</p>');\n    return (ev || window.event).returnValue =\n      'There is not enough space left to save the current document.';\n  }\n});\n\n// Keep the current document in sync across tabs/windows\nwindow.addEventListener('blur', function () {\n  // One tab saves the data...\n  controller.save();\n});\n(function () {\n  // ...and the other tab loads it.\n  var isReloading = false;\n  require('./TMDocument').addOutsideChangeListener(function (docID, prop) {\n    if (docID === controller.getDocument().id && prop !== 'name' && !isReloading) {\n      // Batch together property changes into one reload\n      isReloading = true;\n      setTimeout(function () {\n        isReloading = false;\n        // Preserve undo history\n        controller.forceLoadDocument(controller.getDocument(), true);\n\n      }, 100);\n    }\n  });\n}());\n\n// For interaction/debugging\nexports.controller = controller;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/main.js\n// module id = 0\n// module chunks = 1","module.exports = jQuery;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 4\n// module chunks = 1","'use strict';\n\nvar jsyaml = require('js-yaml'),\n    _ = require('lodash/fp');\n\n// Document Serialization\n\nvar docToYaml = {\n  name: 'name',\n  sourceCode: 'source code',\n  positionTable: 'positions',\n  editorSourceCode: 'editor contents'\n};\nvar yamlToDoc = _.invert(docToYaml);\n\n// like _.mapKeys, but only using the keys specified in a mapping object.\n// {[key: string] -> string} -> ?Object -> Object\nfunction mapKeys(mapping) {\n  return function (input) {\n    var output = {};\n    if (input != null) {\n      Object.keys(mapping).forEach(function (fromKey) {\n        var toKey = mapping[fromKey];\n        output[toKey] = input[fromKey];\n      });\n    }\n    return output;\n  };\n}\n\n// we want parseDocument . stringifyDocument = identity, up to null == undefined.\n\n/**\n * Serialize a document.\n * For each state node position, only .x, .y, and .fixed are saved.\n * .fixed is omitted if true (its default value).\n * @param  {TMDocument} doc document to serialize\n * @return {string}\n */\nvar stringifyDocument = _.flow(\n  mapKeys(docToYaml),\n  _.omitBy(function (x) { return x == null; }),\n  _.update('positions', _.mapValues(function (pos) {\n    return pos.fixed\n      ? {x: pos.x, y: pos.y}\n      : {x: pos.x, y: pos.y, fixed: false};\n  })),\n  // NB. lodash/fp/partialRight takes an array of arguments.\n  _.partialRight(jsyaml.safeDump, [{\n    flowLevel: 2,       // positions: one state per line\n    lineWidth: -1,      // don't wrap lines\n    noRefs: true,       // no aliases/references are used\n    noCompatMode: true  // use y: instead of 'y':\n  }])\n);\n\n/**\n * Deserialize a document.\n * State positions' .px and .py are optional and default to .x and .y.\n * .fixed defaults to true.\n * @param  {string} str    serialized document\n * @return {Object}        data usable in TMDocument.copyFrom()\n * @throws {YAMLException} on YAML syntax error\n * @throws {TypeError}     when missing \"source code\" string property\n */\nvar parseDocument = _.flow(\n  jsyaml.safeLoad,\n  _.update('positions', _.mapValues(function (pos) {\n    // NB. lodash/fp/defaults is swapped: 2nd takes precedence\n    return _.defaults({px: pos.x, py: pos.y, fixed: true}, pos);\n  })),\n  mapKeys(yamlToDoc),\n  checkData\n);\n\n// throw if \"source code\" attribute is missing or not a string\nfunction checkData(obj) {\n  if (obj == null || obj.sourceCode == null) {\n    throw new InvalidDocumentError('The “source code:” value is missing');\n  } else if (!_.isString(obj.sourceCode)) {\n    throw new InvalidDocumentError('The “source code:” value needs to be of type string');\n  }\n  return obj;\n}\n\n// for valid YAML that is not valid as a document\nfunction InvalidDocumentError(message) {\n  this.name = 'InvalidDocumentError';\n  this.message = message || 'Invalid document';\n  this.stack = (new Error()).stack;\n}\nInvalidDocumentError.prototype = Object.create(Error.prototype);\nInvalidDocumentError.prototype.constructor = InvalidDocumentError;\n\nexports.stringifyDocument = stringifyDocument;\nexports.parseDocument = parseDocument;\nexports.InvalidDocumentError = InvalidDocumentError;\n\n// Re-exports\nexports.YAMLException = jsyaml.YAMLException;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/sharing/format.js\n// module id = 5\n// module chunks = 1","'use strict';\n\nvar isBrowserIEorEdge = require('./util').isBrowserIEorEdge;\n/* global localStorage:false, window:false */\n\n///////////////////////\n// Key-Value Storage //\n///////////////////////\n\nvar canUseLocalStorage = (function () {\n  // from modernizr v3.3.1 (modernizr.com)\n  var mod = 'modernizr';\n  try {\n    localStorage.setItem(mod, mod);\n    localStorage.removeItem(mod);\n    return true;\n  } catch (e) {\n    return false;\n  }\n})();\n\n// RAM-only fallback\nvar RAMStorage = (function () {\n  var obj = {};\n  return Object.freeze({\n    get length() { return Object.keys(obj).length; },\n    key: function (n) { return (n in Object.keys(obj)) ? Object.keys(obj)[n] : null; },\n    getItem: function (key) { return {}.hasOwnProperty.call(obj, key) ? obj[key] : null; },\n    setItem: function (key, val) { obj[key] = String(val); },\n    removeItem: function (key) { delete obj[key]; },\n    clear: function () { obj = {}; }\n  });\n})();\n\nvar KeyValueStorage = (function () {\n  var s = canUseLocalStorage ? localStorage : RAMStorage;\n\n  // workaround IE/Edge firing events on its own window\n  var fromOwnWindow = isBrowserIEorEdge\n    ? function () { return window.document.hasFocus(); }\n    : function () { return false; };\n\n  return {\n    read  : s.getItem.bind(s),\n    write : s.setItem.bind(s),\n    remove: s.removeItem.bind(s),\n    // Registers a listener for StorageEvents from other tabs/windows.\n    addStorageListener: canUseLocalStorage\n      ? function (listener) {\n        window.addEventListener('storage', function (e) {\n          if (fromOwnWindow()) {\n            return;\n          }\n          if (e.storageArea === localStorage) {\n            listener(e);\n          }\n        });\n      }\n      : function () {},\n    removeStorageListener: canUseLocalStorage\n      ? window.removeEventListener.bind(window, 'storage')\n      : function () {}\n  };\n})();\n\n\nexports.canUseLocalStorage = canUseLocalStorage;\nexports.KeyValueStorage = KeyValueStorage;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/storage.js\n// module id = 7\n// module chunks = 1","module.exports = Promise;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"Promise\"\n// module id = 8\n// module chunks = 1","'use strict';\n\nvar KeyValueStorage = require('./storage').KeyValueStorage,\n    examples = require('./examples'),\n    util = require('./util'),\n    _ = require('lodash/fp');\n\n/**\n * Document model (storage).\n * @param {string} docID Each document ID in a key-value store should be unique.\n *                       An ID is typically a timestamp. It should not contain '.'.\n */\nfunction TMDocument(docID) {\n  var preset = examples.get(docID);\n  Object.defineProperties(this, {\n    id:     { value: docID },\n    prefix: { value: 'doc.' + docID },\n    isExample: { value: preset ? true : false }\n  });\n  // fall back to reading presets for example documents\n  if (preset) {\n    Object.defineProperties(this, {\n      sourceCode: useFallbackGet(preset, this, 'sourceCode'),\n      // names are read-only\n      positionTable: useFallbackGet(preset, this, 'positionTable'),\n      name: {\n        get: function () { return preset.name; },\n        set: function () {}, // don't err when removing (set = null)\n        enumerable: true\n      }\n    });\n  }\n}\n\nfunction useFallbackGet(preset, obj, prop) {\n  var proto = Object.getPrototypeOf(obj);\n  var desc = Object.getOwnPropertyDescriptor(proto, prop);\n  var get = desc.get;\n  desc.get = function () {\n    return util.coalesce(get.call(obj), preset[prop]);\n  };\n  return desc;\n}\n\n// internal method.\nTMDocument.prototype.path = function (path) {\n  return [this.prefix, path].join('.');\n};\n\n(function () {\n  var store = KeyValueStorage;\n  var read = store.read.bind(store);\n  var write = function (key, val) {\n    if (val != null) {\n      store.write(key, val);\n    } else {\n      store.remove(key);\n    }\n  };\n  // var remove = store.remove.bind(store);\n  function stringProp(path) {\n    return {\n      get: function () { return read(this.path(path)); },\n      set: function (val) { write(this.path(path), val); },\n      enumerable: true\n    };\n  }\n\n  var propDescriptors = {\n    sourceCode: stringProp('diagram.sourceCode'),\n    positionTable: {\n      get: function () {\n        return util.applyMaybe(parsePositionTable,\n          read(this.path('diagram.positions')));\n      },\n      set: function (val) {\n        write(this.path('diagram.positions'),\n          util.applyMaybe(stringifyPositionTable, val));\n      },\n      enumerable: true\n    },\n    editorSourceCode: stringProp('editor.sourceCode'),\n    name: stringProp('name')\n  };\n  Object.defineProperties(TMDocument.prototype, propDescriptors);\n  TMDocument.prototype.dataKeys = Object.keys(propDescriptors);\n})();\n\n// IDEA: bypass extra parse & stringify cycle for positions\nTMDocument.prototype.copyFrom = function (other) {\n  this.dataKeys.forEach(function (key) {\n    this[key] = other[key];\n  }, this);\n  return this;\n};\n\nTMDocument.prototype.delete = function () {\n  this.copyFrom({});\n};\n\n// Cross-tab/window storage sync\n\n/**\n * Checks whether a storage key is for a document's name.\n * @return {?string} The document ID if true, otherwise null.\n */\nTMDocument.IDFromNameStorageKey = function (string) {\n  var result = /^doc\\.([^.]+)\\.name$/.exec(string);\n  return result && result[1];\n};\n\n/**\n * Registers a listener for document changes caused by other tabs/windows.\n * The listener receives the document ID and the property name that changed.\n * @param {Function} listener\n */\nTMDocument.addOutsideChangeListener = function (listener) {\n  var re = /^doc\\.([^.]+)\\.(.+)$/;\n\n  KeyValueStorage.addStorageListener(function (e) {\n    var matches = re.exec(e.key);\n    if (matches) {\n      listener(matches[1], matches[2]);\n    }\n  });\n};\n\n/////////////////////////\n// Position table JSON //\n/////////////////////////\n\n// JSON -> Object\nvar parsePositionTable = JSON.parse;\n\n// PositionTable -> JSON\nvar stringifyPositionTable = _.flow(\n  _.mapValues(truncateCoords(2)),\n  JSON.stringify\n);\n\n// Truncate .x .y .px .py to 2 decimal places, to save space.\nfunction truncateCoords(decimalPlaces) {\n  var multiplier = Math.pow(10, decimalPlaces);\n  function truncate(value) {\n    return Math.round(value * multiplier)/multiplier;\n  }\n\n  return function (val) {\n    var result =  _(val).pick(['x','y','px','py']).mapValues(truncate).value();\n    result.fixed = val.fixed;\n    return result;\n  };\n}\n\nmodule.exports = TMDocument;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/TMDocument.js\n// module id = 9\n// module chunks = 1","'use strict';\n\nvar parseDocument = require('./sharing/format').parseDocument;\nvar fromPairs = require('lodash/fp').fromPairs;\n\n\nfunction requireExample(name) {\n  return require('raw!./examples/' + name + '.yaml');\n}\n\nvar examplePairs = [\n  'repeat01',\n  'binaryIncrement',\n  'divisibleBy3',\n  'copy1s',\n  'divisibleBy3Base10',\n  'matchThreeLengths',\n  'matchBinaryStrings',\n  'palindrome',\n  'busyBeaver3',\n  'busyBeaver4',\n  'powersOfTwo',\n  'lengthMult',\n  'binaryAdd',\n  'unaryMult',\n  'binaryMult'\n].map(function (id) {\n  // parse each string into a document\n  var doc = parseDocument(requireExample(id));\n  doc.id = id;\n\n  return [id, doc];\n});\nvar examples = Object.freeze(fromPairs(examplePairs));\n\n\nfunction isExampleID(docID) {\n  return {}.hasOwnProperty.call(examples, docID);\n}\n\nfunction get(docID) {\n  return isExampleID(docID) ? examples[docID] : null;\n}\n\nvar list = examplePairs.map(function (pair) { return pair[1]; });\n\n\nexports.hasID = isExampleID;\nexports.get = get;\nexports.list = list;\nexports.firsttimeDocID = 'binaryIncrement';\nexports.blankTemplate = requireExample('_template');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/examples.js\n// module id = 12\n// module chunks = 1","'use strict';\n\nvar TM = require('./TuringMachine'),\n    jsyaml = require('js-yaml'),\n    _ = require('lodash');\n\n/**\n * Thrown when parsing a string that is valid as YAML but invalid\n * as a machine specification.\n *\n * Examples: unrecognized synonym, no start state defined,\n * transitioning to an undeclared state.\n *\n * A readable message is generated based on the details (if any) provided.\n * @param {string} reason  A readable error code.\n *   As an error code, this should be relatively short and not include runtime values.\n * @param {?Object} details Optional details. Possible keys:\n *                          problemValue, state, key, synonym, info, suggestion\n */\nfunction TMSpecError(reason, details) {\n  this.name = 'TMSpecError';\n  this.stack = (new Error()).stack;\n\n  this.reason = reason;\n  this.details = details || {};\n}\nTMSpecError.prototype = Object.create(Error.prototype);\nTMSpecError.prototype.constructor = TMSpecError;\n\n// generate a formatted description in HTML\nObject.defineProperty(TMSpecError.prototype, 'message', {\n  get: function () {\n    var header = this.reason;\n    var details = this.details;\n\n    function code(str) { return '<code>' + str + '</code>'; }\n    function showLoc(state, symbol, synonym) {\n      if (state != null) {\n        if (symbol != null) {\n          return ' in the transition from state ' + code(state) + ' and symbol ' + code(symbol);\n        } else {\n          return ' for state ' + code(state);\n        }\n      } else if (synonym != null) {\n        return ' in the definition of synonym ' + code(synonym);\n      }\n      return '';\n    }\n    var problemValue = details.problemValue ? ' ' + code(details.problemValue) : '';\n    var location = showLoc(details.state, details.symbol, details.synonym);\n    var sentences = ['<strong>' + header + problemValue + '</strong>' + location\n      , details.info, details.suggestion]\n      .filter(_.identity)\n      .map(function (s) { return s + '.'; });\n    if (location) { sentences.splice(1, 0, '<br>'); }\n    return sentences.join(' ');\n  },\n  enumerable: true\n});\n\n// type TransitionTable = {[key: string]: ?{[key: string]: string} }\n// type TMSpec = {blank: string, start state: string, table: TransitionTable}\n\n// IDEA: check with flow (flowtype.org)\n// throws YAMLException on YAML syntax error\n// throws TMSpecError for an invalid spec (eg. no start state, transitioning to an undefined state)\n// string -> TMSpec\nfunction parseSpec(str) {\n  var obj = jsyaml.safeLoad(str);\n  // check for required object properties.\n  // auto-convert .blank and 'start state' to string, for convenience.\n  if (obj == null) { throw new TMSpecError('The document is empty',\n    {info: 'Every Turing machine requires a <code>blank</code> tape symbol,' +\n    ' a <code>start state</code>, and a transition <code>table</code>'}); }\n  var detailsForBlank = {suggestion:\n    'Examples: <code>blank: \\' \\'</code>, <code>blank: \\'0\\'</code>'};\n  if (obj.blank == null) {\n    throw new TMSpecError('No blank symbol was specified', detailsForBlank);\n  }\n  obj.blank = String(obj.blank);\n  if (obj.blank.length !== 1) {\n    throw new TMSpecError('The blank symbol must be a string of length 1', detailsForBlank);\n  }\n  obj.startState = obj['start state'];\n  delete obj['start state'];\n  if (obj.startState == null) {\n    throw new TMSpecError('No start state was specified',\n    {suggestion: 'Assign one using <code>start state: </code>'});\n  }\n  obj.startState = String(obj.startState);\n  // parse synonyms and transition table\n  checkTableType(obj.table); // parseSynonyms assumes a table object\n  var synonyms = parseSynonyms(obj.synonyms, obj.table);\n  obj.table = parseTable(synonyms, obj.table);\n  // check for references to non-existent states\n  if (!(obj.startState in obj.table)) {\n    throw new TMSpecError('The start state has to be declared in the transition table');\n  }\n\n  return obj;\n}\n\nfunction checkTableType(val) {\n  if (val == null) {\n    throw new TMSpecError('Missing transition table',\n    {suggestion: 'Specify one using <code>table:</code>'});\n  }\n  if (typeof val !== 'object') {\n    throw new TMSpecError('Transition table has an invalid type',\n      {problemValue: typeof val,\n        info: 'The transition table should be a nested mapping from states to symbols to instructions'});\n  }\n}\n\n// (any, Object) -> ?SynonymMap\nfunction parseSynonyms(val, table) {\n  if (val == null) {\n    return null;\n  }\n  if (typeof val !== 'object') {\n    throw new TMSpecError('Synonyms table has an invalid type',\n      {problemValue: typeof val,\n        info: 'Synonyms should be a mapping from string abbreviations to instructions'\n        + ' (e.g. <code>accept: {R: accept}</code>)'});\n  }\n  return _.mapValues(val, function (actionVal, key) {\n    try {\n      return parseInstruction(null, table, actionVal);\n    } catch (e) {\n      if (e instanceof TMSpecError) {\n        e.details.synonym = key;\n        if (e.reason === 'Unrecognized string') {\n          e.details.info = 'Note that a synonym cannot be defined using another synonym';\n        }\n      }\n      throw e;\n    }\n  });\n}\n\n// (?SynonymMap, {[key: string]: string}) -> TransitionTable\nfunction parseTable(synonyms, val) {\n  return _.mapValues(val, function (stateObj, state) {\n    if (stateObj == null) {\n      // case: halting state\n      return null;\n    }\n    if (typeof stateObj !== 'object') {\n      throw new TMSpecError('State entry has an invalid type',\n        {problemValue: typeof stateObj, state: state,\n          info: 'Each state should map symbols to instructions. An empty map signifies a halting state.'});\n    }\n    return _.mapValues(stateObj, function (actionVal, symbol) {\n      try {\n        return parseInstruction(synonyms, val, actionVal);\n      } catch (e) {\n        if (e instanceof TMSpecError) {\n          e.details.state = state;\n          e.details.symbol = symbol;\n        }\n        throw e;\n      }\n    });\n  });\n}\n\n// omits null/undefined properties\n// (?string, direction, ?string) -> {symbol?: string, move: direction, state?: string}\nfunction makeInstruction(symbol, move, state) {\n  return Object.freeze(_.omitBy({symbol: symbol, move: move, state: state},\n    function (x) { return x == null; }));\n}\n\nfunction checkTarget(table, instruct) {\n  if (instruct.state != null && !(instruct.state in table)) {\n    throw new TMSpecError('Undeclared state', {problemValue: instruct.state,\n      suggestion: 'Make sure to list all states in the transition table and define their transitions (if any)'});\n  }\n  return instruct;\n}\n\n// throws if the target state is undeclared (not in the table)\n// type SynonymMap = {[key: string]: TMAction}\n// (SynonymMap?, Object, string | Object) -> TMAction\nfunction parseInstruction(synonyms, table, val) {\n  return checkTarget(table, function () {\n    switch (typeof val) {\n      case 'string': return parseInstructionString(synonyms, val);\n      case 'object': return parseInstructionObject(val);\n      default: throw new TMSpecError('Invalid instruction type',\n        {problemValue: typeof val,\n          info: 'An instruction can be a string (a direction <code>L</code>/<code>R</code> or a synonym)'\n            + ' or a mapping (examples: <code>{R: accept}</code>, <code>{write: \\' \\', L: start}</code>)'});\n    }\n  }());\n}\n\nvar moveLeft = Object.freeze({move: TM.MoveHead.left});\nvar moveRight = Object.freeze({move: TM.MoveHead.right});\n\n// case: direction or synonym\nfunction parseInstructionString(synonyms, val) {\n  if (val === 'L') {\n    return moveLeft;\n  } else if (val === 'R') {\n    return moveRight;\n  }\n  // note: this order prevents overriding L/R in synonyms, as that would\n  // allow inconsistent notation, e.g. 'R' and {R: ..} being different.\n  if (synonyms && synonyms[val]) { return synonyms[val]; }\n  throw new TMSpecError('Unrecognized string',\n    {problemValue: val,\n      info: 'An instruction can be a string if it\\'s a synonym or a direction'});\n}\n\n// type ActionObj = {write?: any, L: ?string} | {write?: any, R: ?string}\n// case: ActionObj\nfunction parseInstructionObject(val) {\n  var symbol, move, state;\n  if (val == null) { throw new TMSpecError('Missing instruction'); }\n  // prevent typos: check for unrecognized keys\n  (function () {\n    var badKey;\n    if (!Object.keys(val).every(function (key) {\n      badKey = key;\n      return key === 'L' || key === 'R' || key === 'write';\n    })) {\n      throw new TMSpecError('Unrecognized key',\n        {problemValue: badKey,\n          info: 'An instruction always has a tape movement <code>L</code> or <code>R</code>, '\n        + 'and optionally can <code>write</code> a symbol'});\n    }\n  })();\n  // one L/R key is required, with optional state value\n  if ('L' in val && 'R' in val) {\n    throw new TMSpecError('Conflicting tape movements',\n    {info: 'Each instruction needs exactly one movement direction, but two were found'});\n  }\n  if ('L' in val) {\n    move = TM.MoveHead.left;\n    state = val.L;\n  } else if ('R' in val) {\n    move = TM.MoveHead.right;\n    state = val.R;\n  } else {\n    throw new TMSpecError('Missing movement direction');\n  }\n  // write key is optional, but must contain a char value if present\n  if ('write' in val) {\n    var writeStr = String(val.write);\n    if (writeStr.length === 1) {\n      symbol = writeStr;\n    } else {\n      throw new TMSpecError('Write requires a string of length 1');\n    }\n  }\n  return makeInstruction(symbol, move, state);\n}\n\nexports.TMSpecError = TMSpecError;\nexports.parseSpec = parseSpec;\n// re-exports\nexports.YAMLException = jsyaml.YAMLException;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/parser.js\n// module id = 13\n// module chunks = 1","'use strict';\n\nvar $ = require('jquery');\nvar Promise = require('bluebird'); // eslint-disable-line no-shadow\n\nPromise.config({\n  cancellation: true\n});\n\n// On success, 'resolve' is called with the response data.\n// On failure, 'reject' is called with {xhr: jqXHR, status: string, error: string}.\n// To abort the request, use .cancel (from bluebird). Neither is called in that case.\n// jqXHR -> Promise\nfunction promisifyAjax(xhr) {\n  return new Promise(function (resolve, reject, onCancel) {\n    xhr.then(resolve, function (jqXHR, textStatus, errorThrown) {\n      reject({xhr: jqXHR, status: textStatus, error: errorThrown});\n    });\n    onCancel && onCancel(function () {\n      try { xhr.abort(); } catch (e) {/* */}\n    });\n  });\n}\n\n// GistID -> Promise\n// @see promisifyAjax\nfunction getGist(gistID) {\n  return promisifyAjax($.ajax({\n    url: 'https://api.github.com/gists/' + gistID,\n    type: 'GET',\n    dataType: 'json',\n    accepts: 'application/vnd.github.v3+json' // specify API version for stability\n  }));\n}\n\n// https://developer.github.com/v3/gists/#create-a-gist\n// @see promisifyAjax\n// {files: {[filename: string]: {content: string}},\n//  description?: string, public?: boolean} -> Promise\nfunction createGist(payload) {\n  // return Promise.delay(1000, {id: 'offlinetesting'});\n  return promisifyAjax($.ajax({\n    url: 'https://api.github.com/gists',\n    type: 'POST',\n    data: JSON.stringify(payload),\n    // headers: {Authorization: 'token DEVTOKEN'},\n    dataType: 'json', // response datatype\n    accepts: 'application/vnd.github.v3+json' // specify API version for stability\n  }));\n}\n\nexports.getGist = getGist;\nexports.createGist = createGist;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/sharing/gist.js\n// module id = 14\n// module chunks = 1","'use strict';\n\n/* eslint-env browser */\nvar CheckboxTable = require('./CheckboxTable');\nvar FileReaderPromise = require('./FileReaderPromise');\nvar format = require('./format');\nvar getGist = require('./gist').getGist;\n\nvar $ = require('jquery');\nvar _ = require('lodash/fp');\nvar d3 = require('d3');\nvar Promise = require('bluebird');  // eslint-disable-line no-shadow\n\n\nfunction decodeFormURLComponent(str) {\n  return decodeURIComponent(str.replace('+', ' '));\n}\n\n/**\n * https://url.spec.whatwg.org/#urlencoded-parsing\n */\nfunction queryParams(queryString) {\n  function decode(str) {\n    return str ? decodeFormURLComponent(str) : '';\n  }\n  var result = {};\n  queryString.split('&').forEach(function (str) {\n    var pair = str.split('=');\n    result[decode(pair[0])] = decode(pair[1]);\n  });\n  return result;\n}\n\n///////////////////\n// Import Dialog //\n///////////////////\n\n// requires an existing dialog in the DOM\nfunction ImportDialog(dialogNode) {\n  this.node = dialogNode;\n  this.titleNode = dialogNode.querySelector('.modal-header .modal-title');\n  this.bodyNode = dialogNode.querySelector('.modal-body');\n  this.footerNode = dialogNode.querySelector('.modal-footer');\n  this.cancelButtonNode = d3.select(this.footerNode).text('')\n    .append('button')\n      .attr({type: 'button', class: 'btn btn-default', 'data-dismiss': 'modal'})\n      .text('Cancel')\n    .node();\n  this.$dialog = $(dialogNode)\n    .one('hide.bs.modal', this.__onClose.bind(this));\n}\n\n// internal event handler.\nImportDialog.prototype.__onClose = function () {\n  this.onClose();\n  // use .empty to clean up $.on used in CheckboxTable\n  $(this.bodyNode).empty();\n  $(this.footerNode).empty();\n};\n\n// configurable\nImportDialog.prototype.onClose = function () {\n};\n\nImportDialog.prototype.show = function () {\n  this.$dialog.modal({backdrop: 'static', keyboard: false});\n};\n\nImportDialog.prototype.close = function () {\n  this.$dialog.modal('hide');\n};\n\nImportDialog.prototype.setBodyChildNodes = function (nodes) {\n  this.bodyNode.textContent = '';\n  this.bodyNode.appendChild(joinNodes(nodes));\n};\n\nfunction appendPanel(div, titleHTML) {\n  var panel = div.append('div')\n      .attr('class', 'panel panel-default');\n  panel.append('div')\n      .attr('class', 'panel-heading')\n    .append('h5')\n      .attr('class', 'panel-title')\n      .html(titleHTML);\n  return panel;\n}\n\nvar emptySelection = Object.freeze(d3.selectAll([]));\n\n// (D3Selection, {title: string, data: [string]}) -> void\nfunction appendListPanel(container, data) {\n  var panel = emptySelection;\n  if (data.data && data.data.length) {\n    panel = appendPanel(container, data.title);\n    panel.append('div')\n        .attr('class', 'panel-body')\n      .append('ul')\n        .attr('class', 'list-inline')\n      .selectAll('li')\n        .data(data.data)\n      .enter().append('li')\n        .text(_.identity);\n  }\n  return panel;\n}\n\n// ( D3Selection, {title: string, headers: [string],\n//  data: [[string | (D3Selection -> void)]]} ) -> void\nfunction appendTablePanel(container, data) {\n  var panel = emptySelection;\n  if (data.data && data.data.length) {\n    panel = appendPanel(container, data.title);\n    panel.append('table')\n        .attr('class', 'table')\n        .call(function (table) {\n          // headers\n          table.append('thead')\n            .append('tr').selectAll('th').data(data.headers)\n            .enter().append('th').text(_.identity);\n          // contents\n          table.append('tbody').selectAll('tr')\n              .data(data.data)\n            .enter().append('tr').selectAll('td')\n              .data(_.identity)\n            .enter().append('td').each(/* @this td */ function (d) {\n              var td = d3.select(this);\n              if (typeof d === 'function') {\n                d(td);\n              } else {\n                td.text(d);\n              }\n            });\n        });\n  }\n  return panel;\n}\n\n// NonDocumentFiles -> boolean\nvar isEmptyNonDocs = _.every(_.isEmpty);\n\n// (D3Selection, NonDocumentFiles, ?string) -> void\nfunction listNondocuments(dialogBody, nondocs, disclosureTitle) {\n  if (isEmptyNonDocs(nondocs)) {\n    return;\n  }\n  // Disclosure triangle\n  var collapseId = 'nondocument-files';\n  dialogBody.append('a')\n      .attr({\n        href: '#'+collapseId,\n        class: 'disclosure-triangle collapsed',\n        role: 'button',\n        'data-toggle': 'collapse'\n      })\n      .text(disclosureTitle ? disclosureTitle : 'Show other files');\n  var container = dialogBody.append('div')\n      .attr({\n        id: collapseId,\n        class: 'collapse'\n      });\n  // Errors by type, most important first\n  appendTablePanel(container, {\n    title: 'Unexpected error',\n    headers: ['Filename', 'Error'],\n    data: nondocs.otherError.map(function functionName(d) {\n      return [d.filename, errorString(d.error) ];\n    })\n  }).classed('panel-danger', true);\n  appendTablePanel(container, {\n    title: 'Not suitable for import',\n    headers: ['Filename', 'Reason'],\n    data: nondocs.badDoc.map(function (d) {\n      return [d.filename, d.error.message];\n    })\n  });\n  appendTablePanel(container, {\n    title: 'Not valid as YAML',\n    headers: ['Filename', 'Syntax error'],\n    data: nondocs.badYAML.map(function (d) {\n      return [d.filename,\n        function (td) { td.append('pre').text(d.error.message); } ];\n    })\n  });\n  // TODO: document largest allowed filesize; limit export likewise\n  appendListPanel(container, {\n    title: 'File is too large',\n    data: nondocs.tooLarge\n  });\n  appendListPanel(container, {\n    title: 'Different file extension (not <code>.yaml</code>/<code>.yml</code>)',\n    data: nondocs.wrongType\n  });\n}\n\n// deal with objects like DOMError (whose .toString gives \"[object FileError]\")\nfunction errorString(reason) {\n  return reason instanceof Error\n    ? String(reason)\n    : reason.message || reason.name || String(reason);\n}\n\n//////////////////////\n// Document Parsing //\n//////////////////////\n\n/* Interface for Document Parsing\n  type GistFile = {\n    filename: string,\n    size: number,\n    truncated: boolean,\n    content: string\n  };\n  type TMData = {source code: string};\n  type DocFile = {filename: string, size: number, document: TMData};\n\n  type Filename = string;\n  type ErrorTuple = {filename: Filename, error: Error | YAMLException};\n  type NonDocumentFiles = {\n    wrongType:  [Filename],\n    tooLarge:   [Filename],\n    badYAML:    [ErrorTuple],\n    badDoc:     [ErrorTuple],\n    otherError: [ErrorTuple]\n  };\n  type ParseResult = {documentFiles: [DocFile], nonDocumentFiles: NonDocumentFiles};\n */\n\n// Parse each file into a document or a categorized error.\n// Local files are read only if they have the right extension and size.\n// NB. make sure to convert FileList to an actual Array.\n// The promise resolves with ParseResult.\n// (number, [GistFile | File]) -> Promise\nfunction parseFiles(sizelimit, files) {\n  var docfiles = [];\n  var nondocs = {wrongType: [], tooLarge: [], badYAML: [], badDoc: [], otherError: []};\n\n  return Promise.each(files, function (file) {\n    var name = file.filename || file.name; // eslint-disable-line no-shadow\n    if (name.search(/\\.ya?ml$/) === -1) {\n      nondocs.wrongType.push(name);\n    } else if (file.truncated || file.size > sizelimit) {\n      nondocs.tooLarge.push(name);\n    } else {\n      return Promise.resolve(file.content != null ? file.content\n        : FileReaderPromise.readAsText(file))\n      .then(function (content) {\n        docfiles.push({\n          filename: name,\n          size: file.size,\n          document: format.parseDocument(content)\n        });\n      }).catch(function (e) {\n        var tuple = {filename: name, error: e};\n        if (e instanceof format.YAMLException) {\n          nondocs.badYAML.push(tuple);\n        } else if (e instanceof format.InvalidDocumentError) {\n          nondocs.badDoc.push(tuple);\n        } else {\n          nondocs.otherError.push(tuple);\n        }\n      });\n    }\n  }).return({documentFiles: docfiles, nonDocumentFiles: nondocs});\n}\n\n/////////////////////\n// Document Import //\n/////////////////////\n\nfunction showSizeKB(n) {\n  // example: 12.0 KB\n  return (Math.ceil(10*n/1024)/10).toFixed(1) + ' KB';\n}\n\n// {docFiles: [DocFile], nonDocumentFiles: NonDocumentFiles,\n//  dialog: ImportDialog, citeNode?: Node, importDocuments: [TMData] -> void} -> void\nfunction pickMultiple(args) {\n  var docfiles = args.documentFiles,\n      nondocs = args.nonDocumentFiles,\n      citeNode = args.citeNode,\n      dialog = args.dialog,\n      importDocuments = args.importDocuments;\n  // Dialog body\n  var dialogBody = d3.select(dialog.bodyNode).text('');\n  dialogBody.append('p').call(function (p) {\n    p.append('strong').text('Select documents to import');\n    if (citeNode) {\n      p.node().appendChild(document.createTextNode(' from '));\n      p.node().appendChild(citeNode);\n    }\n  });\n  var ctable = new CheckboxTable({\n    table: dialogBody.append('table')\n      .attr({class: 'table table-hover checkbox-table'}),\n    headers: ['Filename', 'Size'],\n    data: docfiles.map(function (doc) {\n      return [doc.filename, showSizeKB(doc.size)];\n    })\n  });\n  listNondocuments(dialogBody, nondocs);\n  // Dialog footer\n  var importButton = d3.select(dialog.footerNode).append('button')\n      .attr({type: 'button', class: 'btn btn-primary', 'data-dismiss': 'modal'})\n      .property('disabled', true)\n      .text('Import')\n      .on('click', /* @this button */ function () {\n        d3.select(this).on('click', null); // prevent double import; like .one()\n        var names = d3.set(ctable.getCheckedValues());\n        importDocuments(docfiles\n          .filter(function (file) { return names.has(file.filename); })\n          .map(_.property('document'))\n        );\n      })\n    .node();\n  ctable.onChange = function () {\n    importButton.disabled = ctable.isCheckedEmpty();\n  };\n}\n\n// {nonDocumentFiles: NonDocumentFiles, dialog: ImportDialog, citeLink?: Node} -> void\nfunction pickNone(args) {\n  var nondocs = args.nonDocumentFiles,\n      dialog = args.dialog,\n      citeLink = args.citeLink;\n\n  d3.select(dialog.bodyNode).text('').call(function (body) {\n    body.append('p').append('strong').text(!isEmptyNonDocs(nondocs)\n        ? 'None of the files are suitable for import.'\n        : 'No files were selected.');\n    if (citeLink) {\n      body.append('p').text('Requested URL: ').node().appendChild(citeLink);\n    }\n    listNondocuments(body, nondocs, 'Show details');\n  });\n  dialog.cancelButtonNode.textContent = 'Close';\n}\n\n// Intermingle text and nodes.\n// [Node | string] -> DocumentFragment\nfunction joinNodes(nodes) {\n  var result = document.createDocumentFragment();\n  nodes.forEach(function (node) {\n    if (typeof node === 'string') {\n      result.appendChild(document.createTextNode(node));\n    } else {\n      result.appendChild(node);\n    }\n  });\n  return result;\n}\n\nfunction wrapTag(tagName, node) {\n  var tag = document.createElement(tagName);\n  tag.appendChild(node);\n  return tag;\n}\n\n// Create a link with text <q>`gist description`</q> if given, otherwise gist `gistID`.\n// {gistID: string, description?: string} -> HTMLAnchorElement | HTMLQuoteElement\nfunction gistDescriptionLink(args) {\n  var link = externalLink({\n    href: 'https://gist.github.com/' + args.gistID,\n    textContent: args.description || ('gist ' + args.gistID)\n  });\n  return args.description ? wrapTag('q', link) : link;\n}\n\n// {href: string, textContent?: string} -> HTMLAnchorElement\nfunction externalLink(args) {\n  var link = document.createElement('a');\n  link.href = args.href;\n  link.target = '_blank';\n  link.textContent = args.textContent || args.href;\n  return link;\n}\n\n// The returned promise resolves/cancels when the dialog is closed:\n// • resolves if loading (before import) finished and the user cancelled anyway\n// • cancels if files were still loading and not yet displayed (eg. fetch, parse)\n// ({gistID: string, dialogNode: Node, importDocument: TMData -> void} |\n// {files: FileList, dialogNode: Node, importDocument: TMData -> void}) -> Promise\nfunction importCommon(args) {\n  var gistID = args.gistID,\n      dialogNode = args.dialogNode,\n      importDocument = args.importDocument;\n\n  var dialog = new ImportDialog(dialogNode);\n  var citeLink;\n  var citeNode;\n  // prevent accidentally exceeding quota\n  var MAX_FILESIZE = 400 * 1024;\n  // Start fetch, show dialog\n  var filesPromise = (function () {\n    if (gistID != null) {\n      dialog.titleNode.textContent = 'Import from GitHub gist';\n      citeLink = externalLink({href: 'https://gist.github.com/' + gistID});\n      dialog.setBodyChildNodes(['Retrieving ', citeLink, '…']);\n      return getGist(gistID).then(function (data) {\n        citeNode = gistDescriptionLink({\n          gistID: gistID,\n          description: data.description\n        });\n        dialog.setBodyChildNodes(['Processing ', citeLink, '…']);\n        return _.values(data.files);\n      });\n    } else {\n      dialog.titleNode.textContent = 'Import from files';\n      dialog.setBodyChildNodes(['Processing files…']);\n      return Promise.resolve(_.toArray(args.files));\n    }\n  }());\n  dialog.show();\n  // Parse, pick, import\n  var promise = filesPromise\n  .then(parseFiles.bind(undefined, MAX_FILESIZE))\n  .then(function (parsed) {\n    var docfiles = parsed.documentFiles;\n    switch (docfiles.length) {\n      case 0:\n        pickNone({\n          nonDocumentFiles: parsed.nonDocumentFiles,\n          dialog: dialog,\n          citeLink: citeLink\n        });\n        return;\n      case 1:\n        importDocument(docfiles[0].document);\n        dialog.close();\n        return;\n      default:\n        pickMultiple({\n          documentFiles: docfiles,\n          nonDocumentFiles: parsed.nonDocumentFiles,\n          dialog: dialog,\n          citeNode: citeNode,\n          importDocuments: function importDocuments(docs) {\n            docs.concat().reverse().map(importDocument);\n          }\n        });\n    }\n  })\n  .catch(function (reason) {\n    dialog.setBodyChildNodes([messageForError(reason)]\n      .concat(citeLink ? ['Requested URL: ', citeLink] : [])\n    );\n    dialog.cancelButtonNode.textContent = 'Close';\n  });\n  var waitForDialog = new Promise(function (resolve) {\n    dialog.onClose = function () {\n      promise.cancel();\n      resolve();\n    };\n  });\n  return promise.return(waitForDialog);\n}\n\n// {gistID: string, dialogNode: Node, importDocument: TMData -> void} -> Promise\nvar importGist = importCommon;\n\n// {files: FileList, dialogNode: Node, importDocument: TMData -> void} -> Promise\nvar importLocalFiles = importCommon;\n\nfunction createElementHTML(tagName, innerHTML) {\n  var element = document.createElement(tagName);\n  element.innerHTML = innerHTML;\n  return element;\n}\n\n// ({xhr: jqXHR} | Error) -> Node\nfunction messageForError(reason) {\n  var xhr = reason.xhr;\n  if (xhr) {\n    // case: couldn't fetch\n    return createElementHTML('p', (function () {\n      switch (reason.status) {\n        case 'abort':\n          return [''];\n        case 'timeout':\n          return [\n            '<strong>The request timed out.</strong>',\n            'You can check your connection and try again.'\n          ];\n        default:\n        // case: HTTP error\n          if (xhr.status === 404) {\n            return [\n              '<strong>No GitHub gist exists with that ID.</strong>',\n              'It’s possible the ID is incorrect, or the gist was deleted.'\n            ];\n          } else if (xhr.status === 0) {\n            return ['GitHub could not be reached. Your Internet connection may be offline.'];\n          } else {\n            return [\n              'The import failed because of a <strong>connection error</strong>.',\n              'HTTP status code: ' + xhr.status + ' ' + xhr.statusText\n            ];\n          }\n      }\n    }()).join('<br>'));\n  } else {\n    // case: other error\n    var pre = document.createElement('pre');\n    pre.textContent = errorString(reason);\n    return joinNodes([\n      createElementHTML('p', 'An unexpected error occurred:'), pre]);\n  }\n}\n\n// Import a gist via ?import-gist=gistID and remove the query string from the URL.\n// Call this once the DOM is ready (document.readyState === 'interactive').\n// {dialogNode: Node, importDocument: TMData -> void} -> void\nfunction runImport(args) {\n  function removeQuery() {\n    try {\n      history.replaceState(null, null, location.pathname);\n    } catch (e) {\n      // ignore\n    }\n  }\n\n  var params = queryParams(location.search.substring(1));\n  var gistID = params['import-gist'];\n  if (gistID) {\n    importGist(_.assign({gistID: gistID}, args))\n    .finally(removeQuery);\n  }\n}\n\nexports.importGist = importGist;\nexports.importLocalFiles = importLocalFiles;\nexports.runImport = runImport;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/sharing/import.js\n// module id = 15\n// module chunks = 1","module.exports = ace;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ace\"\n// module id = 17\n// module chunks = 1","module.exports = jsyaml;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jsyaml\"\n// module id = 18\n// module chunks = 1","module.exports = \"input: '${2}'\\nblank: '${3: }'\\nstart state: ${4:start}\\ntable:\\n  ${4}:\\n    ${5}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/raw-loader!./src/examples/_template.yaml\n// module id = 21\n// module chunks = 1","module.exports = \"name: binary addition\\nsource code: |\\n  # Adds two binary numbers together.\\n\\n  # Format: Given input a+b where a and b are binary numbers,\\n  # leaves c b on the tape, where c = a+b.\\n  # Example: '11+1' => '100 1'.\\n  input: '1011+11001'\\n  blank: ' '\\n  start state: right\\n  table:\\n    # Start at the second number's rightmost digit.\\n    right:\\n      [0,1,+]: R\\n      ' ': {L: read}\\n\\n    # Add each digit from right to left:\\n    # read the current digit of the second number,\\n    read:\\n      0: {write: c, L: have0}\\n      1: {write: c, L: have1}\\n      +: {write: ' ', L: rewrite}\\n    # and add it to the next place of the first number,\\n    # marking the place (using O or I) as already added.\\n    have0: {[0,1]: L, +: {L: add0}}\\n    have1: {[0,1]: L, +: {L: add1}}\\n    add0:\\n      [0,' ']: {write: O, R: back0}\\n      1      : {write: I, R: back0}\\n      [O,I]  : L\\n    add1:\\n      [0,' ']: {write: I, R: back1}\\n      1      : {write: O, L: carry}\\n      [O,I]  : L\\n    carry:\\n      [0,' ']: {write: 1, R: back1}\\n      1      : {write: 0, L}\\n    # Then, restore the current digit, and repeat with the next digit.\\n    back0:\\n      [0,1,O,I,+]: R\\n      c: {write: 0, L: read}\\n    back1:\\n      [0,1,O,I,+]: R\\n      c: {write: 1, L: read}\\n\\n    # Finish: rewrite place markers back to 0s and 1s.\\n    rewrite:\\n      O: {write: 0, L}\\n      I: {write: 1, L}\\n      [0,1]: L\\n      ' ': {R: done}\\n    done:\\n\\n\\n  # Exercise:\\n\\n  # • Generate the Fibonacci sequence in binary, listed from right to left:\\n  #   ...1101 1000 101 11 10 1 1 0\\n  #   Hint: prefix the current number with a +, copy the previous number\\n  #   and place it left of the +, run the adder, and repeat.\\n  #   Example: '1 0' => '+1 0' => '0+1 0' => '1 1 0' => '+1 1 0' => ...\\npositions:\\n  right:   {x: 300, y: 130}\\n  rewrite: {x: 500, y: 130}\\n  done:    {x: 620, y: 130}\\n\\n  back0:  {x: 250, y: 250}\\n  read:   {x: 400, y: 250}\\n  back1:  {x: 550, y: 250}\\n  carry:  {x: 650, y: 250}\\n\\n  add0:   {x: 150, y: 400}\\n  have0:  {x: 300, y: 400}\\n  have1:  {x: 500, y: 400}\\n  add1:   {x: 650, y: 400}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/raw-loader!./src/examples/binaryAdd.yaml\n// module id = 22\n// module chunks = 1","module.exports = \"name: binary increment\\nsource code: |\\n  # Adds 1 to a binary number.\\n  input: '1011'\\n  blank: ' '\\n  start state: right\\n  table:\\n    # scan to the rightmost digit\\n    right:\\n      [1,0]: R\\n      ' '  : {L: carry}\\n    # then carry the 1\\n    carry:\\n      1      : {write: 0, L}\\n      [0,' ']: {write: 1, L: done}\\n    done:\\n\\n\\n  # Exercises:\\n\\n  # • Modify the machine to always halt on the leftmost digit\\n  #   (regardless of the number's length).\\n  #   Hint: add a state between carry and done.\\n\\n  # • Make a machine that adds 2 instead of 1.\\n  #   Hint: 2 is '10' in binary, so the last digit is unaffected.\\n  #   Alternative hint: chain together two copies of the machine from\\n  #   the first exercise (renaming the states of the second copy).\\n\\n  # • Make a machine to subtract 1.\\n  #   To simplify things, assume the input is always greater than 0.\\npositions:\\n  right: {x: 230, y: 250}\\n  carry: {x: 400, y: 250}\\n  done: {x: 570, y: 250}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/raw-loader!./src/examples/binaryIncrement.yaml\n// module id = 23\n// module chunks = 1","module.exports = \"name: binary multiplication\\nsource code: |\\n  # Multiplies two binary numbers together.\\n\\n  # Examples: '11*11' => '1001', '111*110' => '101010'.\\n  input: '11*101' # 3*5 = 15 (1111 in binary)\\n  blank: ' '\\n  start state: start\\n  table:\\n    # Prefix the input with a '+', and go to the rightmost digit.\\n    start:\\n      [0,1]: {L: init}\\n    init:\\n      ' ': {write: '+', R: right}\\n    right:\\n      [0,1,'*']: R\\n      ' ': {L: readB}\\n\\n    # Read and erase the last digit of the multiplier.\\n    # If it's 1, add the current multiplicand.\\n    # In any case, double the multiplicand afterwards.\\n    readB:\\n      0: {write: ' ', L: doubleL}\\n      1: {write: ' ', L: addA}\\n    addA:\\n      [0,1]: L\\n      '*': {L: read} # enter adder\\n    # Double the multiplicand by appending a 0.\\n    doubleL:\\n      [0,1]: L\\n      '*': {write: 0, R: shift}\\n    double: # return from adder\\n      [0,1,+]: R\\n      '*': {write: 0, R: shift}\\n    # Make room by shifting the multiplier right 1 cell.\\n    shift:\\n      0: {write: '*', R: shift0}\\n      1: {write: '*', R: shift1}\\n      ' ': {L: tidy} # base case: multiplier = 0\\n    shift0:\\n      0:   {R: shift0}\\n      1:   {write: 0, R: shift1}\\n      ' ': {write: 0, R: right}\\n    shift1:\\n      0:   {write: 1, R: shift0}\\n      1:   {R: shift1}\\n      ' ': {write: 1, R: right}\\n\\n    tidy:\\n      [0,1]: {write: ' ', L}\\n      +: {write: ' ', L: done}\\n    done:\\n\\n  # This is the 'binary addition' machine almost verbatim.\\n  # It's adjusted to keep the '+'\\n  # and to lead to another state instead of halting.\\n    read:\\n      0: {write: c, L: have0}\\n      1: {write: c, L: have1}\\n      +: {L: rewrite} # keep the +\\n    have0: {[0,1]: L, +: {L: add0}}\\n    have1: {[0,1]: L, +: {L: add1}}\\n    add0:\\n      [0,' ']: {write: O, R: back0}\\n      1      : {write: I, R: back0}\\n      [O,I]  : L\\n    add1:\\n      [0,' ']: {write: I, R: back1}\\n      1      : {write: O, L: carry}\\n      [O,I]  : L\\n    carry:\\n      [0,' ']: {write: 1, R: back1}\\n      1      : {write: 0, L}\\n    back0:\\n      [0,1,O,I,+]: R\\n      c: {write: 0, L: read}\\n    back1:\\n      [0,1,O,I,+]: R\\n      c: {write: 1, L: read}\\n    rewrite:\\n      O: {write: 0, L}\\n      I: {write: 1, L}\\n      [0,1]: L\\n      ' ': {R: double} # when done, go to the 'double' state\\n\\n\\n  # Remark:\\n  # We can view the machine as expressing a recursive function:\\n\\n  #   multiply(a, b) = mult(0, a, b)\\n\\n  #   mult(acc, a, 0     ) = acc\\n  #   mult(acc, a, 2k + 0) = mult(acc    , 2a, k)   where k ≠ 0\\n  #   mult(acc, a, 2k + 1) = mult(acc + a, 2a, k)\\n\\n  # where a, b, and k are natural numbers.\\n\\n  # Each reduction maintains the invariant\\n  #   mult(acc, a, b) = acc + a * b\\n  # Note that mult's third argument (b) is always decreasing,\\n  # so mult is guaranteed to halt.\\n  # Eventually b reaches 0 and the result is simply the accumulator.\\npositions:\\n  start:  {x: 80 , y: 70}\\n  init:   {x: 190, y: 70}\\n  tidy:   {x: 730, y: 70}\\n  done:   {x: 730, y: 180}\\n\\n  right:  {x: 300, y: 115}\\n  shift:  {x: 600, y: 115}\\n  shift1: {x: 450, y: 70}\\n  shift0: {x: 450, y: 160}\\n\\n  readB:  {x: 300, y: 215}\\n  addA:   {x: 160, y: 215}\\n  doubleL: {x: 550, y: 215}\\n\\n  rewrite: {x: 363, y: 300}\\n  double: {x: 650, y: 300}\\n\\n  back0:  {x: 160, y: 370}\\n  read:   {x: 300, y: 370}\\n  back1:  {x: 440, y: 370}\\n  carry:  {x: 540, y: 370}\\n\\n  add0:   {x:  60, y: 470}\\n  have0:  {x: 200, y: 470}\\n  have1:  {x: 400, y: 470}\\n  add1:   {x: 540, y: 470}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/raw-loader!./src/examples/binaryMult.yaml\n// module id = 24\n// module chunks = 1","module.exports = \"name: 3-state busy beaver\\nsource code: |\\n  # A 3-state 2-symbol busy beaver for most non-blank symbols.\\n  # It takes 13 steps and leaves 6 non-blank symbols on the tape.\\n\\n  # What's a \\\"busy beaver\\\"?\\n  #   Suppose every possible Turing machine with n states and k symbols\\n  #   (for instance, 3 states and 2 symbols) were started on\\n  #   a blank tape with no input.\\n  #   Some of the machines would never halt. Out of the ones that do halt,\\n  #   a machine that leaves the most non-blank symbols on the tape\\n  #   is called a busy beaver.\\n  blank: '0'\\n  start state: A\\n  table:\\n    A:\\n      0: {write: 1, R: B}\\n      1: {L: C}\\n    B:\\n      0: {write: 1, L: A}\\n      1: R\\n    C:\\n      0: {write: 1, L: B}\\n      1: {R: H}\\n    H:\\n\\n  # An alternative criterion is halting after the most steps.\\n  # This busy beaver takes the most steps (21) but only prints 5 1's:\\n    # A:\\n    #   0: {write: 1, R: B}\\n    #   1: {R: H}\\n    # B:\\n    #   0: {write: 1, L: B}\\n    #   1: {write: 0, R: C}\\n    # C:\\n    #   0: {write: 1, L}\\n    #   1: {L: A}\\n    # H:\\n\\n\\n  # Exercise:\\n\\n  # • Consider Turing machines that have n states and k symbols.\\n  #   Instead of a missing instruction, halting is denoted by\\n  #   a transition to a special \\\"halt\\\" state (for a total of n+1 states).\\n  #   How many different transition functions are possible?\\n\\n  #   Hint: Each instruction writes a symbol, moves left or right,\\n  #   and goes to a state.\\n  #   There is one instruction per combination of non-halt state & symbol.\\n\\n\\n\\n  #   Answer: (2k(n+1))^(nk)\\npositions:\\n  A: {x: 320, y: 296.188}\\n  B: {x: 400, y: 157.624}\\n  C: {x: 480, y: 296.188}\\n  H: {x: 400, y: 376.188}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/raw-loader!./src/examples/busyBeaver3.yaml\n// module id = 25\n// module chunks = 1","module.exports = \"name: 4-state busy beaver\\nsource code: |\\n  # A 4-state 2-symbol busy beaver\\n  # that halts after 107 steps, leaving 13 1's on the tape.\\n  # It takes the most steps *and* prints the most 1's.\\n  blank: 0\\n  start state: A\\n  table:\\n    A: {0: {write: 1, R: B}, 1:           {L: B}}\\n    B: {0: {write: 1, L: A}, 1: {write: 0, L: C}}\\n    C: {0: {write: 1, R: H}, 1:           {L: D}}\\n    D: {0: {write: 1, R   }, 1: {write: 0, R: A}}\\n    H:\\n\\n\\n  # Finding a busy beaver requires considering every n-state k-symbol\\n  # machine and proving either that it halts with no more non-blank symbols\\n  # or that it never halts at all.\\n\\n  # Even with strategies to reduce the search space—\\n  # including normalization, accelerated simulation, and automated proofs—\\n  # there are still machines that show surprising complexity\\n  # and require individual analysis.\\n\\n  # This 4-state busy beaver was proven by Allen Brady in 1983.\\n  # Busy beavers for 5 states and above are as yet unknown.\\n  # At the time of writing, the current 5-state 2-symbol contender\\n  # takes 47,176,870 steps to halt, and the 6-state contender\\n  # takes over 7.4 * 10^36534 steps\\n  # (http://www.logique.jussieu.fr/~michel/bbc.html).\\n  # \\\"Given that 5-state 2-symbol halting Turing machines can compute\\n  # Collatz-like congruential functions, it may be very hard to find\\n  # [the next busy beaver]\\\" (https://oeis.org/A060843).\\n\\n\\n  # An entertaining read on busy beavers and their profoundness:\\n\\n  # • \\\"Who Can Name the Bigger Number?\\\"\\n  #   http://www.scottaaronson.com/writings/bignumbers.html\\npositions:\\n  # square with side length 160\\n  A: {x: 320, y: 170}\\n  B: {x: 480, y: 170}\\n\\n  C: {x: 480, y: 330}\\n  D: {x: 320, y: 330}\\n  H: {x: 620, y: 330}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/raw-loader!./src/examples/busyBeaver4.yaml\n// module id = 26\n// module chunks = 1","module.exports = \"name: copy 1s\\nsource code: |\\n  # Copies a string of consecutive 1s.\\n  input: '111'\\n  blank: 0\\n  start state: each\\n  table:\\n    # mark the current 1 by erasing it\\n    each:\\n      0: {R: H}\\n      1: {write: 0, R: sep}\\n    # skip to the separator\\n    sep:\\n      0: {R: add}\\n      1: R\\n    # skip to the end of the copy and write a 1\\n    add:\\n      0: {write: 1, L: sepL}\\n      1: R\\n    # return to the separator\\n    sepL:\\n      0: {L: next}\\n      1: L\\n    # return to the erased 1, restore it, and then advance to the next 1\\n    next:\\n      0: {write: 1, R: each}\\n      1: L\\n    H:\\n\\n\\n  # Exercises:\\n\\n  # • Edit the machine to copy the string indefinitely,\\n  #   i.e. given the input '11', produce 11011011011...\\n  #   Hint: this can be done by modifying only one transition.\\n\\n  # • Make a machine to output the endless sequence 1011011101111011111...\\npositions:\\n  each: {x: 400   , y: 100}\\n  sep:  {x: 400.01, y: 250}\\n  add:  {x: 400.02, y: 400}\\n  sepL: {x: 250   , y: 250}\\n  next: {x: 250.01, y: 100}\\n  H:    {x: 550   , y: 100}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/raw-loader!./src/examples/copy1s.yaml\n// module id = 27\n// module chunks = 1","module.exports = \"name: divisible by 3\\nsource code: |\\n  # Checks if a binary number is divisible by 3.\\n  input: '1001' # try '1111' (15), '10100' (20), '111001' (57)\\n  blank: ' '\\n  # How it works:\\n\\n  # Consider reading a binary number, say 10011 (19),\\n  # from left to right one digit at a time.\\n  # Each time a digit is read, the new value equals the new digit\\n  # plus the old value shifted left one place (multiplied by 2).\\n\\n  # Digits  Value\\n  # -------------\\n  #         0\\n  # 1       1\\n  # 10      2\\n  # 100     4\\n  # 1001    9\\n  # 10011   19\\n\\n  # Now instead of tracking the entire number, just track the remainder.\\n  # It works the same way.\\n  start state: q0\\n  table:\\n    q0:\\n      0: R       # 2*0 + 0 = 0\\n      1: {R: q1} # 2*0 + 1 = 1\\n      ' ': {R: accept}\\n    q1:\\n      0: {R: q2} # 2*1 + 0 = 2\\n      1: {R: q0} # 2*1 + 1 = 3\\n    q2:\\n      0: {R: q1} # 2*2 + 0 = 4\\n      1: {R: q2} # 2*2 + 1 = 5\\n    accept:\\n\\n\\n  # Exercises:\\n\\n  # • Modify the machine to check if n-1 is divisible by 3,\\n  #   where n is the input. That is, accept the binary of 1, 4, 7, 10, ...\\n  #   Hint: this can be done without modifying the tape (no 'write').\\n\\n  # • Round the number up to the nearest multiple of 3.\\n  #   Hint: do one pass right to find the remainder, then another pass left\\n  #   to add. See the 'binary increment' example for how to add.\\n\\n  # • Round the number down to the nearest multiple of 3.\\npositions:\\n  q0: {x: 230, y: 250}\\n  q1: {x: 400, y: 250}\\n  q2: {x: 570, y: 250}\\n  accept: {x: 230.01, y: 380}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/raw-loader!./src/examples/divisibleBy3.yaml\n// module id = 28\n// module chunks = 1","module.exports = \"name: divisible by 3 (base 10)\\nsource code: |\\n  # Checks if a base 10 number is divisible by 3.\\n  input: 4728 # try 42, 57, 1337, 5328, 7521, 314159265\\n  blank: ' '\\n  # This uses the same idea as the base 2 version.\\n  #\\n  # To make things more interesting, we derive the step relation:\\n  # Let x be the number left of the tape head,\\n  #     d the digit under the head, and\\n  #     x' the number up to and including the head.\\n  # Then\\n  #   x' = 10x + d .\\n  # Notice 10 ≡ 1 (mod 3). Therefore\\n  #   x' ≡ x + d (mod 3) .\\n  # Each step simply adds the new digit's remainder mod 3.\\n  start state: q0\\n  table:\\n    q0:\\n      [0,3,6,9]: R     # 0 + 0 ≡ 0 (mod 3)\\n      [1,4,7]: {R: q1} # 0 + 1 ≡ 1\\n      [2,5,8]: {R: q2} # 0 + 2 ≡ 2\\n      ' ': {R: accept}\\n    q1:\\n      [0,3,6,9]: R     # 1 + 0 ≡ 1\\n      [1,4,7]: {R: q2} # 1 + 1 ≡ 2\\n      [2,5,8]: {R: q0} # 1 + 2 ≡ 0\\n    q2:\\n      [0,3,6,9]: R     # 2 + 0 ≡ 2\\n      [1,4,7]: {R: q0} # 2 + 1 ≡ 0\\n      [2,5,8]: {R: q1} # 2 + 2 ≡ 1\\n    accept:\\n\\n\\n  # Exercises:\\n\\n  # • Check for divisibility by 5.\\n  #   Hint: only 2 states (besides accept) are required.\\n\\n  # • Check for divisibility by 4.\\n  #   Hint: use 4 states (besides accept).\\npositions:\\n  # centered equilateral triangle with side length 250\\n  q0: {x: 275, y: 322.1688}\\n  q1: {x: 400, y: 105.6624}\\n  q2: {x: 525, y: 322.1688}\\n  accept: {x: 275.01, y: 430}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/raw-loader!./src/examples/divisibleBy3Base10.yaml\n// module id = 29\n// module chunks = 1","module.exports = \"name: multiplied lengths\\nsource code: |\\n  # Decides the language { a^(i)b^(j)c^(k) | i*j = k and i,j,k ≥ 1 }.\\n  # (a's followed by b's then c's,\\n  # where the number of a's multiplied by the number of b's\\n  # equals the number of c's.)\\n  input: aabbbcccccc # try abc, b, aabcbc, aabcc, aabbbbcccccccc\\n  blank: ' '\\n  start state: start\\n\\n  table:\\n    # Check for the form a^(i)b^(j)c^(k) where i,j,k ≥ 1.\\n    start:  {        a: {R: a+}}\\n    a+:     {a: R,   b: {R: b+}}\\n    b+:     {b: R,   c: {R: c+}}\\n    c+:     {c: R, ' ': {L: left}}\\n    left:\\n      [a,b,c]: L\\n      ' ': {R: eachA}\\n    # Then check that i*j = k.\\n    #   The approach is two nested loops:\\n    #   For each 'a':\\n    #     For each 'b':\\n    #       Mark one 'c'\\n    #   At the end, check that all c's are marked.\\n    eachA:\\n      a: {write: ' ', R: eachB}\\n      b: {R: scan}\\n    eachB:\\n      a: R\\n      b: {write: B, R: markC}\\n      C: {L: nextA}\\n    markC:\\n      [b,C]: R\\n      c: {write: C, L: nextB}\\n    nextB:\\n      [b,C]: L\\n      B: {R: eachB}\\n    nextA:\\n      a: L\\n      B: {write: b, L}\\n      ' ': {R: eachA}\\n\\n    scan:\\n      [b,C]: R\\n      ' ': {R: accept}\\n    accept:\\npositions:\\n  start:  {x: 180, y: 40}\\n  a+:     {x: 180, y: 180}\\n  b+:     {x: 180, y: 320}\\n  c+:     {x: 180, y: 460}\\n  left:   {x: 290, y: 320}\\n\\n  accept: {x: 400, y: 40}\\n  eachA:  {x: 400, y: 180}\\n  eachB:  {x: 400, y: 320}\\n  markC:  {x: 400, y: 460}\\n\\n  scan:   {x: 560, y: 180}\\n  nextA:  {x: 560, y: 320}\\n  nextB:  {x: 560, y: 460}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/raw-loader!./src/examples/lengthMult.yaml\n// module id = 30\n// module chunks = 1","module.exports = \"name: equal strings\\nsource code: |\\n  # Decides the language { w#w | w ∈ {0,1}* }\\n  # (two equal binary strings separated by '#')\\n  input: '01001#01001' # try '#', '1#10', '10#1', '10#10'\\n  blank: ' '\\n  # Two strings are equal if they are both the empty string,\\n  # or they start with the same symbol and are equal thereafter.\\n  start state: start\\n  table:\\n    start:\\n      # Inductive case: start with the same symbol.\\n      0: {write: ' ', R: have0}\\n      1: {write: ' ', R: have1}\\n      # Base case: empty string.\\n      '#': {R: check}\\n    have0:\\n      [0,1]: R\\n      '#': {R: match0}\\n    have1:\\n      [0,1]: R\\n      '#': {R: match1}\\n    match0:\\n      x: R\\n      0: {write: x, L: back}\\n    match1:\\n      x: R\\n      1: {write: x, L: back}\\n    back:\\n      [0,1,'#',x]: L\\n      ' ': {R: start}\\n    check:\\n      x: R\\n      ' ': {R: accept}\\n    accept:\\n\\n\\n  # Exercises:\\n\\n  # • Accept if the second string is the bitwise complement\\n  #   (1s and 0s swapped) of the first, e.g. accept '1101#0010'.\\n\\n  # • Check that a binary string has the same number of 0s and 1s;\\n  #   eg., accept '001110' but reject '10010'.\\n\\n  # • Check if two strings are different.\\n  #   Example: accept '00#001' and '0101#0111', but reject '1001#1001'.\\npositions:\\n  accept: {x: 80 , y: 250}\\n  check:  {x: 190, y: 250}\\n  # regular hexagon with side length 150\\n  start:  {x: 300, y: 250}\\n  back:   {x: 600, y: 250}\\n  have1:  {x: 375, y: 120.10}\\n  match1: {x: 525, y: 120.10}\\n  have0:  {x: 375, y: 379.90}\\n  match0: {x: 525, y: 379.90}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/raw-loader!./src/examples/matchBinaryStrings.yaml\n// module id = 31\n// module chunks = 1","module.exports = \"name: three equal lengths\\nsource code: |\\n  # Decides the language { aⁿbⁿcⁿ | n ≥ 1 }, that is,\\n  # accepts a's followed by b's then c's of the same length.\\n  input: aabbcc # try bac, aabc, aabcc, aabcbc\\n  blank: ' '\\n  # Mark the first a, b, and c on each pass (by capitalizing them).\\n  # All a's must precede all b's, which must precede all c's.\\n  # When there are no more a's,\\n  # all input symbols should have been marked.\\n  start state: qA\\n  table:\\n    qA:\\n      a: {write: A, R: qB}\\n      B: {R: scan}\\n    qB:\\n      [a,B]: R\\n      b: {write: B, R: qC}\\n    qC:\\n      [b,C]: R\\n      c: {write: C, L: back}\\n    back:\\n      [a,B,b,C]: L\\n      A: {R: qA}\\n    scan:\\n      [B,C]: R\\n      ' ': {R: accept}\\n    accept:\\n\\n\\n  # Exercises:\\n\\n  # • Suppose a ledger starts from 0 and gains one dollar for each +\\n  #   and loses one for each -. Reading left to right,\\n  #   check that the account never goes into the negative.\\n  #   Examples: accept '+-++' and '++-+--', reject '-++' and '++---+'.\\n\\n  # • Check parentheses for proper nesting,\\n  #   e.g. accept '()(()()())' but reject '(()))(' and '(()('.\\npositions:\\n  qA: {x: 240, y: 250}\\n  qB: {x: 400, y: 250}\\n  qC: {x: 560, y: 250}\\n  back:   {x: 400, y: 370}\\n  scan:   {x: 320, y: 150}\\n  accept: {x: 480, y: 150}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/raw-loader!./src/examples/matchThreeLengths.yaml\n// module id = 32\n// module chunks = 1","module.exports = \"name: palindrome\\nsource code: |\\n  # Accepts palindromes made of the symbols 'a' and 'b'\\n  input: 'abba' # try a, ab, bb, babab\\n  blank: ' '\\n  start state: start\\n  synonyms:\\n    accept: {R: accept}\\n    reject: {R: reject}\\n  # A palindrome is either the empty string, a single symbol,\\n  # or a (shorter) palindrome with the same symbol added to both ends.\\n  table:\\n    start:\\n      a: {write: ' ', R: haveA}\\n      b: {write: ' ', R: haveB}\\n      ' ': accept # empty string\\n    haveA:\\n      [a,b]: R\\n      ' ': {L: matchA}\\n    haveB:\\n      [a,b]: R\\n      ' ': {L: matchB}\\n    matchA:\\n      a: {write: ' ', L: back} # same symbol at both ends\\n      b: reject\\n      ' ': accept # single symbol\\n    matchB:\\n      a: reject\\n      b: {write: ' ', L: back} # same symbol at both ends\\n      ' ': accept # single symbol\\n    back:\\n      [a,b]: L\\n      ' ': {R: start}\\n    accept:\\n    reject:\\n\\n\\n  # Exercise:\\n\\n  # • Modify the machine to include 'c' in the symbol alphabet,\\n  #   so it also works for strings like 'cabbac'.\\npositions:\\n  haveA:  {x: 240, y: 185}\\n  start:  {x: 400, y: 185}\\n  haveB:  {x: 560, y: 185}\\n\\n  matchA: {x: 240, y: 315}\\n  back:   {x: 400, y: 315}\\n  matchB: {x: 560, y: 315}\\n\\n  accept: {x: 400, y: 55}\\n  reject: {x: 400, y: 445}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/raw-loader!./src/examples/palindrome.yaml\n// module id = 33\n// module chunks = 1","module.exports = \"name: powers of two\\nsource code: |\\n  # Matches strings of 0s whose length is a power of two.\\n\\n  # This example comes from the textbook\\n  #   \\\"Introduction to the Theory of Computation\\\" (3rd edition, 2012)\\n  #   by Michael Sipser\\n  # The states have been renamed (from q1, q2, etc.)\\n  # to make it easier to understand.\\n  input: '0000' # try '0', '000', '00000000'\\n  blank: ' '\\n  start state: zero\\n  synonyms:\\n    accept: {R: accept}\\n    reject: {R: reject}\\n  # The idea: divide the length by 2 repeatedly until it reaches 1.\\n\\n  # To do this, cross off every other 0, one pass at a time.\\n  # If any pass reads an odd number of 0s (a remainder), reject right away.\\n  # Otherwise if every pass halves the length cleanly,\\n  # the length must be a power of two (1*2^n for n ≥ 0).\\n\\n  # Note that since the first 0 is never crossed off, we can simply\\n  # erase it on the first pass and start the count from 1 from then on.\\n  table:\\n    zero:\\n      0  : {write: ' ', R: one}\\n      ' ': reject\\n    # Base case: accept length of 1 = 2^0.\\n    one:\\n      0  : {write: x, R: even}\\n      ' ': accept\\n      x  : R\\n    # Inductive case: divide by 2 and check for no remainder.\\n    even:\\n      0  : {R: odd}\\n      ' ': {L: back} # return for another pass\\n      x  : R\\n    odd: # odd and > 1\\n      0  : {write: x, R: even}\\n      ' ': reject # odd number of 0s on this pass\\n      x  : R\\n    back:\\n      ' ': {R: one}\\n      [0,x]: L\\n    accept:\\n    reject:\\npositions:\\n  zero:   {x: 200, y: 200}\\n  one:    {x: 400, y: 200}\\n  even:   {x: 600, y: 200}\\n\\n  odd:    {x: 600, y: 385}\\n  back:   {x: 500, y: 125}\\n  accept: {x: 400, y: 300}\\n  reject: {x: 200, y: 385}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/raw-loader!./src/examples/powersOfTwo.yaml\n// module id = 34\n// module chunks = 1","module.exports = \"name: repeat 0 1\\nsource code: |\\n  # This is the first example machine given by Alan Turing in his 1936 paper\\n  #   \\\"On Computable Numbers, with an Application to\\n  #    the Entscheidungsproblem\\\".\\n  # It simply writes the endless sequence 0 1 0 1 0 1...\\n  blank: ' '\\n  start state: b\\n  table:\\n    b:\\n      ' ': {write: 0, R: c}\\n    c:\\n      ' ':           {R: e}\\n    e:\\n      ' ': {write: 1, R: f}\\n    f:\\n      ' ':           {R: b}\\n\\n\\n  # (Turing uses the convention of leaving a gap after each output cell,\\n  # reserving it for marking the cell. For instance, on a tape that\\n  # contains '0 1x0 0 1 1y1y0y', x marks the leftmost 1 and y marks 110.)\\npositions:\\n  b: {x: 300, y: 200, fixed: false}\\n  c: {x: 450, y: 150, fixed: false}\\n  e: {x: 500, y: 300, fixed: false}\\n  f: {x: 350, y: 350, fixed: false}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/raw-loader!./src/examples/repeat01.yaml\n// module id = 35\n// module chunks = 1","module.exports = \"name: unary multiplication\\nsource code: |\\n  # Multiplies together two unary numbers separated by a '*'.\\n  # (Unary is like tallying. Here '||*|||' means 2 times 3.)\\n  input: '||*|||' # try '*', '|*|||', '||||*||'\\n  blank: ' '\\n\\n  # The idea:\\n  #   multiply(0, b) = 0\\n  #   multiply(a, b) = b + multiply(a-1, b)   when a > 0\\n  start state: eachA\\n  table:\\n    # For each 1 in a, add a copy of b.\\n    eachA:\\n      '|': {write: ' ', R: toB}  # Inductive case: a > 0.\\n      '*': {R: skip}             # Base case:      a = 0.\\n    toB:\\n      '|': R\\n      '*': {R: eachB} # enter copier\\n    nextA: # return from copier\\n      ' ': {write: '|', R: eachA}\\n      ['|','*']: L\\n\\n    skip:\\n      '|': R\\n      ' ': {R: done}\\n    done:\\n\\n    # This is the 'copy 1s' machine, with ' ' as 0 and '|' as 1.\\n    eachB:\\n      ' ': {L: nextA}\\n      '|': {write: ' ', R: sep}\\n    sep:\\n      ' ': {R: add}\\n      '|': R\\n    add:\\n      ' ': {write: '|', L: sepL}\\n      '|': R\\n    sepL:\\n      ' ': {L: nextB}\\n      '|': L\\n    nextB:\\n      ' ': {write: '|', R: eachB}\\n      '|': L\\n\\npositions:\\n  eachA:  {x: 400, y:  50}\\n  toB:    {x: 400, y: 150}\\n  eachB:  {x: 400, y: 250}\\n  sep:   {x: 400, y: 350}\\n  add:   {x: 400, y: 450}\\n\\n  sepL:  {x: 280, y: 350}\\n  nextB:  {x: 280, y: 250}\\n\\n  nextA:  {x: 280, y: 90}\\n  skip:   {x: 520, y: 90}\\n  done:   {x: 520, y: 190}\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/raw-loader!./src/examples/unaryMult.yaml\n// module id = 36\n// module chunks = 1","'use strict';\n\n/* global document */\nvar KeyValueStorage = require('./storage').KeyValueStorage;\nvar TMDocument = require('./TMDocument');\nvar d3 = require('d3');\nvar defaults = require('lodash/fp').defaults; // NB. 2nd arg takes precedence\n\n/**\n * Document menu controller.\n *\n * The view is fully determined by a 3-tuple: ([ID], ID -> Name, currentID).\n * @constructor\n * @param {Object}  args                  argument object\n * @param {HTMLSelectElement}\n *                  args.menu\n * @param {?Node}  [args.group=args.menu] Node to add documents to.\n * @param {string}  args.storagePrefix\n * @param {?(TMDocument -> HTMLOptionElement)}\n *                  args.makeOption       Customize rendering for each document entry.\n * @param {?string} args.firsttimeDocID   Document to open on the first visit.\n */\nfunction DocumentMenu(args) {\n  var menu = args.menu,\n      group = args.group || menu,\n      storagePrefix = args.storagePrefix,\n      firsttimeDocID = args.firsttimeDocID;\n\n  if (!menu) {\n    throw new TypeError('DocumentMenu: missing parameter: menu element');\n  } else if (!storagePrefix) {\n    throw new TypeError('DocumentMenu: missing parameter: storage prefix');\n  }\n  if (args.makeOption) {\n    this.optionFromDocument = args.makeOption;\n  }\n  this.menu = menu;\n  this.group = group;\n  this.group.innerHTML = '';\n  this.__storagePrefix = storagePrefix;\n\n  // Load document entries (non-examples)\n  this.doclist = new DocumentList(storagePrefix + '.list');\n  this.render();\n  // Re-open last-opened document\n  this.selectDocID(this.getSavedCurrentDocID() || firsttimeDocID);\n\n  // Listen for selection changes\n  var self = this;\n  this.menu.addEventListener('change', function () {\n    self.onChange(self.currentDocument, {type: 'open'});\n  });\n\n  // Listen for storage changes in other tabs/windows\n  KeyValueStorage.addStorageListener(function (e) {\n    var docID;\n    var option, newOption;\n\n    if (e.key === self.doclist.storageKey) {\n      // case: [ID] list changed\n      self.doclist.readList();\n      self.render();\n    } else if ( (docID = TMDocument.IDFromNameStorageKey(e.key)) ) {\n      // case: single document renamed: (ID -> Name) changed\n      option = self.findOptionByDocID(docID);\n      if (option) {\n        // replace the whole <option>, to be consistent with .optionFromDocument\n        option.parentNode.replaceChild(\n          newOption = self.optionFromDocument(new TMDocument(docID)),\n          option\n        );\n        newOption.selected = option.selected;\n        d3.select(newOption).datum( d3.select(option).datum() );\n      }\n    }\n  });\n}\n\nObject.defineProperties(DocumentMenu.prototype, {\n  currentOption: {\n    get: function () {\n      return this.menu.options[this.menu.selectedIndex];\n    },\n    enumerable: true\n  },\n  currentDocument: {\n    get: function () {\n      var opt = this.currentOption;\n      return opt ? new TMDocument(opt.value) : null;\n    },\n    enumerable: true\n  }\n});\n\nDocumentMenu.prototype.render = function () {\n  var currentDocID = this.currentOption ? this.currentOption.value : null;\n\n  var option = d3.select(this.group).selectAll('option')\n    .data(this.doclist.list, function (entry) { return entry.id; });\n\n  option.exit().remove();\n\n  var self = this;\n  option.enter().insert(function (entry) {\n    return self.optionFromDocument(new TMDocument(entry.id));\n  });\n\n  // If current document was deleted, switch to another document\n  if (this.currentOption.value !== currentDocID) {\n    // fallback 1: saved current docID\n    if (!this.selectDocID(this.getSavedCurrentDocID(), {type: 'delete'})) {\n      // fallback 2: whatever is now selected\n      this.onChange(this.currentDocument, {type: 'delete'});\n    }\n  }\n};\n\n// Returns the <option> whose 'value' attribute is docID.\nDocumentMenu.prototype.findOptionByDocID = function (docID) {\n  return this.menu.querySelector('option[value=\"' + docID.replace(/\"/g, '\\\\\"') + '\"]');\n};\n\n// Selects (switches the active item to) the given docID. Returns true on success.\nDocumentMenu.prototype.selectDocID = function (docID, opts) {\n  try {\n    this.findOptionByDocID(docID).selected = true;\n  } catch (e) {\n    return false;\n  }\n  this.onChange(this.currentDocument, opts);\n  return true;\n};\n\n// Saves the current (selected) docID to storage.\nDocumentMenu.prototype.saveCurrentDocID = function () {\n  var docID = this.currentOption && this.currentOption.value;\n  if (docID) {\n    KeyValueStorage.write(this.__storagePrefix + '.currentDocID', docID);\n  }\n};\n\n// Returns the saved current docID, otherwise null.\nDocumentMenu.prototype.getSavedCurrentDocID = function () {\n  return KeyValueStorage.read(this.__storagePrefix + '.currentDocID');\n};\n\n// Configurable methods\n\nDocumentMenu.prototype.optionFromDocument = function (doc) {\n  var option = document.createElement('option');\n  option.value = doc.id;\n  option.text = doc.name || 'untitled';\n  return option;\n};\n\n// Called when the current document ID changes\n// through user action (<select>) or this class's API.\n// The callback receives the new value of .currentDocument,\n// along with the options object (whose .type\n// is 'duplicate', 'delete', or 'open').\nDocumentMenu.prototype.onChange = function () {\n};\n\n// Internal Helpers\n\n// prepend then select\nDocumentMenu.prototype.__prepend = function (doc, opts) {\n  var option = this.optionFromDocument(doc);\n  this.group.insertBefore(option, this.group.firstChild);\n  if (opts && opts.select) {\n    this.menu.selectedIndex = option.index;\n    this.onChange(doc, opts);\n  }\n  return doc;\n};\n\n// Methods not about Current Document\n\nDocumentMenu.prototype.newDocument = function (opts) {\n  return this.__prepend(this.doclist.newDocument(), defaults({type: 'open'}, opts));\n};\n\n// Methods about Current Document\n\nDocumentMenu.prototype.duplicate = function (doc, opts) {\n  return this.__prepend(this.doclist.duplicate(doc), defaults({type: 'duplicate'}, opts));\n};\n\nDocumentMenu.prototype.rename = function (name) {\n  this.currentDocument.name = name;\n  this.currentOption.text = name;\n};\n\n// required invariant: one option is always selected.\n// returns true if the current entry was removed from the list.\nDocumentMenu.prototype.delete = function (opts) {\n  this.currentDocument.delete();\n  var index = this.menu.selectedIndex;\n  var didDeleteEntry = this.doclist.deleteIndex(index);\n  if (didDeleteEntry) {\n    this.currentOption.remove();\n    this.menu.selectedIndex = index;\n    this.onChange(this.currentDocument, defaults({type: 'delete'}, opts));\n  }\n  return didDeleteEntry;\n};\n\n/////////////////////\n// Document List   //\n// (model/storage) //\n/////////////////////\n\n\n// for custom documents.\nfunction DocumentList(storageKey) {\n  this.storageKey = storageKey;\n  this.readList();\n}\n\n// () -> string\nDocumentList.newID = function () {\n  return String(Date.now());\n};\n\n// internal methods.\nDocumentList.prototype.add = function (docID) {\n  this.__list.unshift({id: docID});\n  this.writeList();\n};\nDocumentList.prototype.readList = function () {\n  this.__list = JSON.parse(KeyValueStorage.read(this.storageKey)) || [];\n};\nDocumentList.prototype.writeList = function () {\n  KeyValueStorage.write(this.storageKey, JSON.stringify(this.__list));\n};\n\nDocumentList.prototype.newDocument = function () {\n  var newID = DocumentList.newID();\n  this.add(newID);\n  return new TMDocument(newID);\n};\n\nDocumentList.prototype.duplicate = function (doc) {\n  return this.newDocument().copyFrom(doc);\n};\n\n/**\n * Behaves like list.splice(index, 1).\n * @param  {number} index index of the element to delete\n * @return {boolean} true if an element was removed, false otherwise (index out of bounds)\n */\nDocumentList.prototype.deleteIndex = function (index) {\n  var deleted = this.__list.splice(index, 1);\n  this.writeList();\n  return (deleted.length > 0);\n};\n\nObject.defineProperties(DocumentList.prototype, {\n  list: {\n    get: function () { return this.__list; },\n    enumerable: true\n  }\n});\n\nmodule.exports = DocumentMenu;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/DocumentMenu.js\n// module id = 37\n// module chunks = 1","'use strict';\nvar TMSimulator = require('./TMSimulator'),\n    parser = require('./parser'),\n    util = require('./util'),\n    ace = require('ace-builds/src-min-noconflict'),\n    d3 = require('d3');\nvar TMSpecError = parser.TMSpecError;\nvar YAMLException = parser.YAMLException;\nvar UndoManager = ace.require('ace/undomanager').UndoManager;\n\n// https://stackoverflow.com/questions/3665115/how-to-create-a-file-in-memory-for-user-to-download-but-not-through-server#answer-33542499\nfunction download(filename, data) {\n    const blob = new Blob([data], {type: 'text/csv'});\n    if(window.navigator.msSaveOrOpenBlob) {\n        window.navigator.msSaveBlob(blob, filename);\n    }\n    else{\n        const elem = window.document.createElement('a');\n        elem.href = window.URL.createObjectURL(blob);\n        elem.download = filename;        \n        document.body.appendChild(elem);\n        elem.click();        \n        document.body.removeChild(elem);\n    }\n}\n\n/**\n * For editing and displaying a TMDocument.\n * The controller coordinates the interactions between\n *   1. simulator\n *   2. code editor\n *   3. storage\n *\n * All container and button params are required.\n * @param {Object} containers\n *   Empty containers to use (contents will likely be replaced).\n * @param {HTMLDivElement} containers.simulator\n * @param {HTMLDivElement} containers.editorAlerts\n * @param {HTMLDivElement} containers.editor\n * @param {Object} buttons Buttons to use.\n * @param {HTMLButtonElement} buttons.simulator.run\n * @param {HTMLButtonElement} buttons.simulator.step\n * @param {HTMLButtonElement} buttons.simulator.reset\n * @param {HTMLButtonElement} buttons.editor.load For loading the editor source\n * @param {HTMLButtonElement} buttons.editor.revert For reverting the editor source\n * @param {TMDocument} document The document to load from and save to.\n */\nfunction TMDocumentController(containers, buttons, document) {\n  this.simulator = new TMSimulator(containers.simulator, buttons.simulator);\n\n  // Set up ace editor //\n  var editor = ace.edit(containers.editor);\n  editor.session.setOptions({\n    mode: 'ace/mode/yaml',\n    tabSize: 2,\n    useSoftTabs: true\n  });\n  editor.setOptions({\n    minLines: 15,\n    maxLines: 50\n  });\n  // suppress warning about\n  // \"Automatically scrolling cursor into view after selection change\"\n  editor.$blockScrolling = Infinity;\n\n  var editorButtons = buttons.editor;\n  var self = this;\n  editorButtons.load\n      .addEventListener('click', function () {\n        self.loadEditorSource();\n        // save whenever \"Load\" is pressed\n        self.save();\n        self.editor.focus();\n      });\n  editorButtons.export\n      .addEventListener('click', function () {\n        let spec = self.simulator.spec;\n        console.log(\"exporting...\");\n        console.log(spec);\n\n        if (spec.blank === ' ') {\n          alert(`sysprog machine dont support ' ' as blankspace`)\n          throw `sysprog machine dont support ' ' as blankspace`\n        }\n\n        let fileContent = ''\n        fileContent += `ATM`\n        fileContent += `PCS 2302/2024 autogenerate\\n`\n        fileContent += `${Array.from(new Set(spec.input)).join(' ')}\\n` // alfabeto de entrada\n        fileContent += `${Array.from(new Set(spec.blank + spec.input)).join(' ')}\\n` // alfabeto da fita\n        fileContent += `1\\n` // numero de fitas\n        fileContent += `1\\n` // numero de trilhas na fita 0\n        fileContent += `2\\n` // direcoes da fita 0 (infinita nas duas)\n        fileContent += `${spec.startState}\\n` // estado inicial\n        fileContent += `${Object.keys(spec.table).find((k) => spec.table[k] === null)}\\n` // estado final (estado sem nenhum valor)\n        for(const actualState in spec.table){\n          Object.entries(spec.table[actualState] || {}).filter(([k, v]) => v).flatMap(([k, v]) => k.split(',').map(c => [c, v])).forEach(([readSimbol, action]) => {\n            const nextState = action['state'] || actualState;\n            const moveDirection = action['move'].toString();\n            const writeSimbol = action['symbol'] || readSimbol;\n            fileContent += `${actualState} ${readSimbol} ${writeSimbol} ${nextState} ${moveDirection}\\n`\n          })\n        }\n        fileContent += `end`\n        console.log(fileContent);\n        download('tm.txt', fileContent)\n      });\n  editorButtons.revert\n      .addEventListener('click', function () {\n        self.revertEditorSource();\n        self.editor.focus();\n      });\n\n  Object.defineProperties(this, {\n    __document: {\n      value: {editor: {}}, // dummy document that gets replaced\n      writable: true\n    },\n    buttons   : { value: buttons },\n    containers: { value: containers },\n    editor    : { value: editor, enumerable: true }\n  });\n  this.openDocument(document);\n}\n\nTMDocumentController.prototype.getDocument = function () {\n  return this.__document;\n};\n\n// set the backing document, without saving/loading or affecting the views.\nTMDocumentController.prototype.setBackingDocument = function (doc) {\n  this.__document = doc;\n};\n\n// save the current document, then open another one.\n// does nothing if the document ID is the same.\nTMDocumentController.prototype.openDocument = function (doc) {\n  if (this.getDocument().id === doc.id) { return; } // same document\n  this.save();\n  return this.forceLoadDocument(doc);\n};\n\n// (low-level) load the document. current data is discarded without saving.\n// this can be used to switch from a deleted document or reload a document.\nTMDocumentController.prototype.forceLoadDocument = function (doc, keepUndoHistory) {\n  this.setBackingDocument(doc);\n  var diagramSource = doc.sourceCode;\n  var editorSource = doc.editorSourceCode;\n  // init //\n  this.simulator.clear();\n  this.setEditorValue(editorSource == null ? diagramSource : editorSource);\n  // prevent undo-ing to the previous document. note: .reset() doesn't work\n  if (!keepUndoHistory) {\n    this.editor.session.setUndoManager(new UndoManager());\n  }\n\n  if (editorSource == null) {\n    // case: synced: load straight from editor.\n    this.loadEditorSource();\n  } else {\n    // case: not synced: editor has separate contents.\n    this.isSynced = false;\n    try {\n      this.simulator.sourceCode = diagramSource;\n      this.simulator.positionTable = doc.positionTable;\n    } catch (e) {\n      this.showCorruptDiagramAlert(true);\n    }\n  }\n};\n\nTMDocumentController.prototype.save = function () {\n  var doc = this.getDocument();\n  if (this.hasValidDiagram) {\n    // sidenote: deleting first can allow saving when space would otherwise be full\n    doc.editorSourceCode = this.isSynced ? undefined : this.editor.getValue();\n    doc.sourceCode = this.simulator.sourceCode;\n    doc.positionTable = this.simulator.positionTable;\n  } else {\n    if (doc.editorSourceCode == null) {\n      // case 1: editor was synced with the diagram.\n      //  only edit doc.sourceCode until it's fixed;\n      //  don't worsen the problem to case 2.\n      doc.sourceCode = this.editor.getValue();\n    } else {\n      // case 2: editor has separate contents.\n      //  this is more confusing, as there are two \"source code\" values to contend with.\n      doc.editorSourceCode = this.editor.getValue();\n    }\n  }\n};\n\n/**\n * Set the editor contents.\n * • Converts null to '', since editor.setValue(null) crashes.\n * • Clears the editor alerts.\n * @param {?string} str\n */\nTMDocumentController.prototype.setEditorValue = function (str) {\n  this.editor.setValue(util.coalesce(str, ''), -1 /* put cursor at start */);\n  this.setAlertErrors([]);\n};\n\n/////////////////////////\n// Error/Alert Display //\n/////////////////////////\n\nfunction aceAnnotationFromYAMLException(e) {\n  return {\n    row: e.mark.line,\n    column: e.mark.column,\n    text: 'Not valid YAML (possibly caused by a typo):\\n' + e.message,\n    type: 'error'\n  };\n}\n\nTMDocumentController.prototype.setAlertErrors = function (errors) {\n  var self = this;\n  var alerts = d3.select(self.containers.editorAlerts).selectAll('.alert')\n    .data(errors, function (e) { return String(e); }); // key by error description\n\n  alerts.exit().remove();\n\n  alerts.enter()\n    .append('div')\n      .attr('class', 'alert alert-danger')\n      .attr('role', 'alert')\n      .each(/** @this div */ function (e) {\n        var div = d3.select(this);\n        if (e instanceof YAMLException) {\n          var annot = aceAnnotationFromYAMLException(e);\n          var lineNum = annot.row + 1; // annotation lines start at 0; editor starts at 1\n          var column = annot.column;\n          div.append('strong')\n              .text('Syntax error on ')\n            .append('a')\n              .text('line ' + lineNum)\n              .on('click', function () {\n                self.editor.gotoLine(lineNum, column, true);\n                self.editor.focus();\n                // prevent scrolling, especially href=\"#\" scrolling to the top\n                d3.event.preventDefault();\n              })\n              .attr('href', '#' + self.containers.editor.id);\n          div.append('br');\n          // aside: text nodes aren't elements so they need to be wrapped (e.g. in span)\n          // https://github.com/mbostock/d3/issues/94\n          div.append('span').text('Possible reason: ' + e.reason);\n        } else if (e instanceof TMSpecError) {\n          div.html(e.message);\n        } else {\n          div.html('<strong>Unexpected error</strong>: ' + e);\n        }\n      });\n  self.editor.session.setAnnotations(\n    errors\n    .map(function (e) {\n      return (e instanceof YAMLException) ? aceAnnotationFromYAMLException(e) : null;\n    })\n    .filter(function (x) { return x; })\n  );\n};\n\n\n//////////////////////////////\n// Syncing diagram & editor //\n//////////////////////////////\n\n// Sync Status\n\n// This method can be overridden as necessary.\n// The default implementation toggles Bootstrap 3 classes.\nTMDocumentController.prototype.setLoadButtonSuccess = function (didSucceed) {\n  d3.select(this.buttons.editor.load)\n      .classed({\n        'btn-success': didSucceed,\n        'btn-primary': !didSucceed\n      });\n};\n\n// internal. whether the editor and diagram source code are in sync, and the diagram is valid.\n// Updates \"Load machine\" button display.\n// for future reference: .isSynced cannot be moved to TMDocument because it requires knowledge from the simulator.\nObject.defineProperty(TMDocumentController.prototype, 'isSynced', {\n  set: function (isSynced) {\n    isSynced = Boolean(isSynced);\n    if (this.__isSynced !== isSynced) {\n      this.__isSynced = isSynced;\n      this.setLoadButtonSuccess(isSynced);\n      if (isSynced) {\n        // changes cause desync\n        var onChange = function () {\n          this.isSynced = false;\n          this.editor.removeListener('change', onChange);\n        }.bind(this);\n        this.editor.on('change', onChange);\n      }\n    }\n  },\n  get: function () { return this.__isSynced; }\n});\n\n// public API for isSynced\nTMDocumentController.prototype.getIsSynced = function () {\n  return Boolean(this.isSynced);\n};\n\n// Load & Revert\n\n// internal. used to detect when an imported document is corrupted.\nObject.defineProperty(TMDocumentController.prototype, 'hasValidDiagram', {\n  get: function () {\n    return Boolean(this.simulator.sourceCode);\n  }\n});\n\n/**\n * Show/hide the notice that the diagram's source code is invalid;\n * use this when the editor has contents of its own (so it can't display the diagram's source).\n *\n * This happens for imported documents that were corrupted.\n * It can also happen if the value in storage is tampered with.\n * @param  {boolean} show true to display immediately, false to hide.\n */\nTMDocumentController.prototype.showCorruptDiagramAlert = function (show) {\n  function enquote(s) { return '<q>' + s + '</q>'; }\n  var div = d3.select(this.simulator.container);\n  if (show) {\n    var revertName = this.buttons.editor.revert.textContent.trim();\n    div.html('')\n      .append('div')\n        .attr('class', 'alert alert-danger')\n        .html('<h4>This imported document has an error</h4>' +\n          [ 'The diagram was not valid and could not be displayed.'\n          , 'You can either load a new diagram from the editor, or attempt to recover this one'\n          , 'using ' + enquote(revertName) + ' (which will replace the current editor contents).'\n          ].join('<br>')\n        );\n  } else {\n    div.selectAll('.alert').remove();\n  }\n};\n\n// Sync from editor to diagram\nTMDocumentController.prototype.loadEditorSource = function () {\n  // load to diagram, and report any errors\n  var errors = (function () {\n    try {\n      var isNewDiagram = !this.hasValidDiagram;\n      this.simulator.sourceCode = this.editor.getValue();\n      if (isNewDiagram) {\n        // loaded new, or recovery succeeded => close error notice, restore positions\n        this.showCorruptDiagramAlert(false);\n        this.simulator.positionTable = this.getDocument().positionTable;\n      }\n      // .toJSON() is the only known way to preserve the cursor/selection(s)\n      // this.__loadedEditorSelection = this.editor.session.selection.toJSON();\n      return [];\n    } catch (e) {\n      return [e];\n    }\n  }.call(this));\n  this.isSynced = (errors.length === 0);\n  this.setAlertErrors(errors);\n};\n\n// Sync from diagram to editor\nTMDocumentController.prototype.revertEditorSource = function () {\n  this.setEditorValue(this.hasValidDiagram\n    ? this.simulator.sourceCode\n    : this.getDocument().sourceCode);\n\n  if (this.hasValidDiagram) {\n    this.isSynced = true;\n  } else {\n    // show errors when reverting to a corrupted diagram\n    this.loadEditorSource();\n  }\n  // if (this.__loadedEditorSelection) {\n  //   this.editor.session.selection.fromJSON(this.__loadedEditorSelection);\n  // }\n};\n\nmodule.exports = TMDocumentController;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/TMDocumentController.js\n// module id = 38\n// module chunks = 1","'use strict';\n\nvar parseSpec = require('./parser').parseSpec,\n    TMViz = require('./TMViz'),\n    watchInit = require('./watch').watchInit,\n    values = require('lodash').values;\n\n/**\n * Turing machine simulator component.\n *\n * Contains a state diagram, tape diagram, and button controls.\n * @param {[type]} container [description]\n * @param {[type]} buttons   [description]\n */\nfunction TMSimulator(container, buttons) {\n  this.container = container;\n  this.buttons = buttons;\n\n  var self = this;\n  buttons.step\n      .addEventListener('click', function () {\n        self.machine.isRunning = false;\n        self.machine.step(); // each step click corresponds to 1 machine step\n      });\n  buttons.run\n      .addEventListener('click', function () {\n        self.machine.isRunning = !self.machine.isRunning;\n      });\n  buttons.reset\n      .addEventListener('click', function () {\n        self.machine.reset();\n      });\n  buttons.all = values(buttons);\n\n  this.clear();\n}\n\nTMSimulator.prototype.clear = function () {\n  this.sourceCode = null;\n};\n\nObject.defineProperties(TMSimulator.prototype, {\n  /**\n   * The machine's source code.\n   * • Setting a new source code will attempt to persist the state node positions.\n   * • To set a new machine, first call .clear(), then set the source code.\n   */\n  sourceCode: {\n    get: function () {\n      return this.__sourceCode;\n    },\n    // throws if sourceCode has errors\n    set: function (sourceCode) {\n      if (this.machine) {\n        this.machine.isRunning = false; // important\n        this.machine.stateviz.force.stop();\n      }\n      if (sourceCode == null) {\n        // clear display\n        this.machine = null;\n        this.container.innerHTML = '';\n      } else {\n        // parse & check, then set\n        var spec = parseSpec(sourceCode);\n        if (this.machine) {\n          // case: update\n          // copy & restore positions, clear & load contents\n          var posTable = this.machine.positionTable;\n          this.clear();\n          this.machine = new TMViz(this.container, spec, posTable);\n        } else {\n          // case: load new\n          this.machine = new TMViz(this.container, spec);\n        }\n      }\n      this.__sourceCode = sourceCode;\n      this.__spec = spec;\n    },\n    enumerable: true\n  },\n  spec: {\n    get: function () {\n      return this.__spec;\n    }\n  },\n  positionTable: {\n    get: function () {\n      return this.machine && this.machine.positionTable;\n    },\n    set: function (posTable) {\n      if (this.machine && posTable) {\n        this.machine.positionTable = posTable;\n      }\n    },\n    enumerable: true\n  },\n  machine: {\n    get: function () {\n      return this.__machine;\n    },\n    set: function (machine) {\n      this.__machine = machine;\n      this.rebindButtons();\n    }\n  }\n});\n\n/////////////\n// Buttons //\n/////////////\n\n/**\n * The innerHTML for the \"Run\" button.\n * The default value can be overridden.\n * @type {string}\n */\nTMSimulator.prototype.htmlForRunButton =\n  '<span class=\"glyphicon glyphicon-play\" aria-hidden=\"true\"></span><br>Run';\nTMSimulator.prototype.htmlForPauseButton =\n  '<span class=\"glyphicon glyphicon-pause\" aria-hidden=\"true\"></span><br>Pause';\n\n// bind: .disabled for Step and Run, and .innerHTML (Run/Pause) for Run\nfunction rebindStepRun(stepButton, runButton, runHTML, pauseHTML, machine) {\n  function onHaltedChange(isHalted) {\n    stepButton.disabled = isHalted;\n    runButton.disabled = isHalted;\n  }\n  function onRunningChange(isRunning) {\n    runButton.innerHTML = isRunning ? pauseHTML : runHTML;\n  }\n  watchInit(machine, 'isHalted', function (prop, oldval, isHalted) {\n    onHaltedChange(isHalted);\n    return isHalted;\n  });\n  watchInit(machine, 'isRunning', function (prop, oldval, isRunning) {\n    onRunningChange(isRunning);\n    return isRunning;\n  });\n}\n\n// internal method.\nTMSimulator.prototype.rebindButtons = function () {\n  var buttons = this.buttons;\n  var enable = (this.machine != null);\n  if (enable) {\n    rebindStepRun(buttons.step, buttons.run,\n      this.htmlForRunButton, this.htmlForPauseButton, this.machine);\n  }\n  buttons.all.forEach(function (b) { b.disabled = !enable; });\n};\n\nmodule.exports = TMSimulator;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/TMSimulator.js\n// module id = 39\n// module chunks = 1","var map = {\n\t\"./_template.yaml\": 21,\n\t\"./binaryAdd.yaml\": 22,\n\t\"./binaryIncrement.yaml\": 23,\n\t\"./binaryMult.yaml\": 24,\n\t\"./busyBeaver3.yaml\": 25,\n\t\"./busyBeaver4.yaml\": 26,\n\t\"./copy1s.yaml\": 27,\n\t\"./divisibleBy3.yaml\": 28,\n\t\"./divisibleBy3Base10.yaml\": 29,\n\t\"./lengthMult.yaml\": 30,\n\t\"./matchBinaryStrings.yaml\": 31,\n\t\"./matchThreeLengths.yaml\": 32,\n\t\"./palindrome.yaml\": 33,\n\t\"./powersOfTwo.yaml\": 34,\n\t\"./repeat01.yaml\": 35,\n\t\"./unaryMult.yaml\": 36\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\treturn map[req] || (function() { throw new Error(\"Cannot find module '\" + req + \"'.\") }());\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 40;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/examples ./~/raw-loader!^\\.\\/.*\\.yaml$\n// module id = 40\n// module chunks = 1","'use strict';\n/**\n * Displays a table of keyboard shortcuts.\n */\n\nvar d3 = require('d3');\n\nfunction identity(x) { return x; }\n\n/**\n * Renders a table, using three layers of list nesting: tbody, tr, td.\n * @param  {[ [[HTML]] ]}     data\n * @param  {HTMLTableElement} table\n * @return {D3Selection}            D3 selection of the <tbody> elements\n */\nfunction renderTable(data, table) {\n  var tbody = d3.select(table).selectAll('tbody')\n      .data(data)\n    .enter().append('tbody');\n\n  var tr = tbody.selectAll('tr')\n      .data(identity)\n    .enter().append('tr');\n\n  tr.selectAll('td')\n      .data(identity)\n    .enter().append('td')\n      .html(identity);\n\n  return tbody;\n}\n\n\n// type Key = string;\n// type KeyList = [Key];\n\n// Key -> Key\nfunction abbreviateKey(key) {\n  switch (key) {\n    case 'Command': return 'Cmd';\n    case 'Option':  return 'Opt';\n    case 'Up':      return '↑';\n    case 'Down':    return '↓';\n    case 'Left':    return '←';\n    case 'Right':   return '→';\n    default:        return key;\n  }\n}\n\n// KeyList -> HTML\nfunction keylistToHTML(keys) {\n  return keys.map(function (key) {\n    return '<kbd>' + key + '</kbd>';\n  }).join('-');\n}\n\n// Commands -> String -> KeyList\nfunction createGetKeylist(commands) {\n  var platform = commands.platform;\n  // workaround: some ace keybindings for Mac use Alt instead of Option\n  var altToOption = platform !== 'mac' ? identity : function (key) {\n    return (key === 'Alt') ? 'Option' : key;\n  };\n\n  return function getKeylist(name) {\n    return commands.commands[name].bindKey[platform].split('-').map(altToOption);\n  };\n}\n\n\n// Fills a <table> with some default keyboard shortcuts.\nfunction main(commands, table) {\n  var getKeylist = createGetKeylist(commands);\n\n  return renderTable(entries.map(function (group) {\n    return group.map(function (d) {\n      return [\n        keylistToHTML(getKeylist(d.name).map(abbreviateKey)),\n        d.desc\n      ];\n    });\n  }), table);\n}\n\nvar entries = [\n  [\n    { name: 'save', desc: 'Load machine<br> <small>Save changes and load the machine.</small>' }\n  ], [\n    { name: 'togglecomment', desc: 'Toggle comment' },\n    { name: 'indent', desc: 'Indent selection' },\n    { name: 'outdent', desc: 'Unindent selection' }\n  ], [\n    { name: 'movelinesup', desc: 'Move line up' },\n    { name: 'movelinesdown', desc: 'Move line down' },\n    { name: 'duplicateSelection', desc: 'Duplicate line/selection' }\n  ], [\n    { name: 'selectMoreAfter', desc: 'Add next occurrence to selection<br> <small>Like a quick “find”. Useful for renaming things.</small>' },\n    { name: 'find', desc: 'Find' },\n    { name: 'replace', desc: 'Find and Replace' }\n  ]\n];\n\n\nexports.main = main;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/kbdshortcuts.js\n// module id = 41\n// module chunks = 1","'use strict';\n\n// var d3 = require('d3');\nvar $ = require('jquery'); // for event delegation\n\nfunction identity(x) { return x; }\nfunction head(array) { return array[0]; }\n\n/**\n * A <table> that includes a checkbox in front of each row,\n * and a header checkbox to (de)select all rows.\n * @param {D3Selection<HTMLTableElement>} args.table empty table to use\n * @param {[string]}    [args.headers] column headers\n * @param {[[string]]}  [args.data]    table data\n */\nfunction CheckboxTable(args) {\n  this.table = args.table;\n  this.headerRow = this.table.append('thead').append('tr');\n  this.tbody = this.table.append('tbody');\n  // header checkbox (selects/deselects all checkboxes)\n  var self = this;\n  this.headerCheckbox = this.headerRow\n    .append('th')\n      .attr('class', 'checkbox-cell')\n    .append('input')\n      .attr('type', 'checkbox')\n      .on('click', /* @this checkbox */ function () {\n        self.getCheckboxes().property('checked', this.checked);\n        self.onChange();\n      });\n  $(this.tbody.node()).on('click', 'tr', /* @this tr */ function (e) {\n    // treat whole <tr> as click zone\n    if (e.target.tagName !== 'INPUT') {\n      var box = this.querySelector('input[type=\"checkbox\"]');\n      box.checked = !box.checked;\n    }\n    // update header checkbox\n    self.refresh();\n    self.onChange();\n  });\n  // content\n  args.headers && this.setHeaders(args.headers);\n  args.data && this.setData(args.data);\n}\n\n/**\n * Set the column headers.\n * @param {[string]} headers\n */\nCheckboxTable.prototype.setHeaders = function (headers) {\n  var th = this.headerRow\n    .selectAll('th:not(.checkbox-cell)')\n      .data(headers);\n  th.exit().remove();\n  th.enter().append('th');\n  th.text(identity);\n};\n\n/**\n * Set the table body data.\n *\n * Each row begins with a checkbox whose .value is the first cell.\n * Rows are keyed by the first cell when updating data.\n * @param {[[string]]} data\n * @return this\n */\nCheckboxTable.prototype.setData = function (data) {\n  var tr = this.tbody.selectAll('tr')\n      .data(data, head);\n  tr.exit().remove();\n  tr.enter()\n    .append('tr')\n  // checkbox at the start of each row\n    .append('td')\n      .attr('class', 'checkbox-cell')\n    .append('input')\n      .attr({\n        type: 'checkbox',\n        value: head\n      });\n  tr.order();\n  // row cells\n  var td = tr.selectAll('td:not(.checkbox-cell)')\n      .data(identity);\n  td.exit().remove();\n  td.enter().append('td');\n  td.text(identity);\n\n  return this;\n};\n\nCheckboxTable.prototype.getCheckboxes = function () {\n  return this.tbody.selectAll('input[type=\"checkbox\"]');\n};\n\nCheckboxTable.prototype.getCheckedValues = function () {\n  return this.tbody.selectAll('input[type=\"checkbox\"]:checked')[0]\n    .map(function (x) { return x.value; });\n};\n\nCheckboxTable.prototype.isCheckedEmpty = function () {\n  var headerBox = this.headerCheckbox.node();\n  return !(headerBox.checked || headerBox.indeterminate);\n};\n\n/**\n * Refresh the header checkbox (called after a row checkbox is toggled).\n */\nCheckboxTable.prototype.refresh = function () {\n  var headerBox = this.headerCheckbox.node();\n  var boxes = this.getCheckboxes();\n\n  var total = boxes.size();\n  var checked = boxes.filter(':checked').size();\n  if (checked === 0) {\n    headerBox.checked = false;\n  } else if (checked === total) {\n    headerBox.checked = true;\n  }\n  headerBox.indeterminate = (0 < checked && checked < total);\n};\n\n// configurable. called after a click toggles a row or header checkbox.\nCheckboxTable.prototype.onChange = function () {\n};\n\nmodule.exports = CheckboxTable;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/sharing/CheckboxTable.js\n// module id = 42\n// module chunks = 1","'use strict';\n\n/* global FileReader:false */\nvar Promise = require('bluebird'); // eslint-disable-line no-shadow\n\n// arguments are forwarded to FileReader.readAsText\n// (Blob, ?encoding) -> Promise\nfunction readAsText() {\n  var args = arguments;\n  return new Promise(function (resolve, reject, onCancel) {\n    var reader = new FileReader();\n    reader.addEventListener('load', function () {\n      resolve(reader.result);\n    });\n    reader.addEventListener('error', function () {\n      reject(reader.error);\n    });\n    onCancel && onCancel(function () {\n      try { reader.abort(); } catch (e) {/* */}\n    });\n\n    reader.readAsText.apply(reader, args);\n  });\n}\n\nexports.readAsText = readAsText;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/sharing/FileReaderPromise.js\n// module id = 43\n// module chunks = 1","'use strict';\n\n/* eslint-env browser */\nvar format = require('./format');\nvar createGist = require('./gist').createGist;\nvar Clipboard = require('clipboard');\nvar $ = require('jquery'); // for bootstrap tooltip\n\n// https://github.com/Modernizr/Modernizr/blob/master/feature-detects/a/download.js\nvar canUseDownloadAttribute =\n  !window.externalHost && 'download' in document.createElement('a');\n\n// can copy to clipboard programmatically?\nvar canUseCopyCommand = (function () {\n  try {\n    return document.queryCommandSupported('copy');\n  } catch (e) {\n    return false;\n  }\n}());\n\n// Add event handlers to select an HTMLInputElement's text on focus.\nfunction addSelectOnFocus(element) {\n  element.addEventListener('focus', function selectAll(e) {\n    e.target.select();\n  });\n  // Safari workaround\n  element.addEventListener('mouseup', function (e) {\n    e.preventDefault();\n  });\n}\n\n// Show a one-time tooltip.\n// NB. an existing title attribute overrides the tooltip options.\nfunction showTransientTooltip($element, options) {\n  $element.tooltip(options)\n    .tooltip('show')\n    .one('hidden.bs.tooltip', function () {\n      $element.tooltip('destroy');\n    });\n}\n\nfunction showCopiedTooltip(element) {\n  showTransientTooltip($(element), {title: 'Copied!', placement: 'bottom'});\n}\n\n\n///////////////////////\n// Share with GitHub //\n///////////////////////\n\n/**\n * Generate a new gist and display a shareable link.\n * @param  {HTMLElement} container  Container to use for displaying the link.\n * @param  {HTMLButtonElement} button\n * @param  {string} filename\n * @param  {string} contents  The file contents.\n * @return {Promise}          Cancellable promise to create the gist.\n */\nfunction generateGist(container, button, filename, contents) {\n  var oldButtonText = button.textContent;\n  button.textContent = 'Loading…';\n  button.disabled = true;\n\n  var payload = {\n    files: {},\n    description: 'Turing machine for http://turingmachine.io',\n    public: true\n  };\n  payload.files[filename] = {content: contents};\n\n  return createGist(payload).then(function (response) {\n    // Show link on success\n    var id = response.id;\n    showGeneratedGist(container, 'http://turingmachine.io/?import-gist=' + id);\n  }).catch(function (reason) {\n    // Alert error on failure\n    var message = (function () {\n      var xhr = reason.xhr;\n      try {\n        return 'Response from GitHub: “' + xhr.responseJSON.message + '”';\n      } catch (e) {\n        if (xhr.status > 0) {\n          return 'HTTP status code: ' + xhr.status + ' ' + xhr.statusText;\n        } else {\n          return 'GitHub could not be reached.\\nYour Internet connection may be offline.';\n        }\n      }\n    }());\n    alert('Could not create new gist.\\n\\n' + message);\n\n    button.disabled = false;\n    button.textContent = oldButtonText;\n  });\n}\n\nfunction showGeneratedGist(container, url) {\n  container.innerHTML =\n    '<input id=\"sharedPermalink\" type=\"url\" class=\"form-control\" readonly>' +\n    '<button type=\"button\" class=\"btn btn-default\" data-clipboard-target=\"#sharedPermalink\">' +\n    '<span class=\"glyphicon glyphicon-copy\" aria-hidden=\"true\"></span>' +\n    '</button>';\n  var urlInput = container.querySelector('input');\n  urlInput.value = url;\n  urlInput.size = url.length + 2;\n  addSelectOnFocus(urlInput);\n  urlInput.focus();\n}\n\nfunction createGenerateGistButton(container) {\n  container.innerHTML =\n  '<button type=\"button\" class=\"btn btn-default\">Create permalink</button>' +\n  '<p class=\"help-block\">This will create and link to a new' +\n    ' <a href=\"https://help.github.com/articles/creating-gists/#creating-an-anonymous-gist\"' +\n    ' target=\"_blank\">read-only</a> GitHub gist.' +\n  '</p>';\n  return container.querySelector('button');\n}\n\n\n///////////////////\n// Download file //\n///////////////////\n\n// Create a link button if canUseDownloadAttribute, otherwise a link with instructions.\nfunction createDownloadLink(filename, contents) {\n  var link = document.createElement('a');\n  link.href = 'data:text/x-yaml;charset=utf-8,' + encodeURIComponent(contents);\n  link.target = '_blank';\n  link.download = filename;\n\n  if (canUseDownloadAttribute) {\n    link.textContent = 'Download document';\n    link.className = 'btn btn-primary';\n    return link;\n  } else {\n    link.textContent = 'Right-click here and choose “Save target as…” or “Download Linked File As…”';\n    var p = document.createElement('p');\n    p.innerHTML = ', <br>then name the file to end with <code>.yaml</code>';\n    p.insertBefore(link, p.firstChild);\n    return p;\n  }\n}\n\n\n////////////\n// Common //\n////////////\n\nfunction init(args) {\n  var $dialog = args.$dialog,\n      getCurrentDocument = args.getCurrentDocument,\n      getIsSynced = args.getIsSynced,\n      gistContainer = args.gistContainer,\n      downloadContainer = args.downloadContainer,\n      textarea = args.textarea;\n\n  if (canUseDownloadAttribute) {\n    $dialog.addClass('download-attr');\n  }\n  if (!canUseCopyCommand) {\n    $dialog.addClass('no-copycommand');\n  }\n  gistContainer.className = 'form-group form-inline';\n  addSelectOnFocus(textarea);\n\n  function setupDialog() {\n    var doc = getCurrentDocument();\n    var filename = doc.name + '.yaml';\n    var contents = format.stringifyDocument(doc);\n    var gistPromise;\n\n    // warn about unsynced changes\n    var $alert;\n    if (!getIsSynced()) {\n      $alert = $(\n        '<div class=\"alert alert-warning\" role=\"alert\">' +\n        'The code editor has <strong>unsynced changes</strong> and might not correspond with the diagram.<br>' +\n        'Click <q>Load machine</q> to try to sync them. Otherwise, two sets of code will be exported.' +\n        '</div>'\n      ).prependTo($dialog.find('.modal-body'));\n    }\n\n    createGenerateGistButton(gistContainer).addEventListener('click', function (e) {\n      gistPromise = generateGist(gistContainer, e.target, filename, contents);\n    });\n\n    // \"Download document\" button link\n    downloadContainer.appendChild(createDownloadLink(filename, contents));\n    // <textarea> for document contents\n    textarea.value = contents;\n\n    var clipboard = new Clipboard('[data-clipboard-target]');\n    clipboard.on('success', function (e) {\n      showCopiedTooltip(e.trigger);\n      e.clearSelection();\n    });\n\n    // return cleanup function\n    return function () {\n      if (gistPromise) {\n        try { gistPromise.cancel(); } catch (e) {/* */}\n      }\n      if ($alert) { $alert.remove(); }\n      gistContainer.textContent = '';\n      downloadContainer.textContent = '';\n      textarea.value = '';\n      clipboard.destroy();\n    };\n  }\n\n  $dialog.on('show.bs.modal', function () {\n    var cleanup = setupDialog();\n    $dialog.one('hidden.bs.modal', cleanup);\n  });\n  $dialog.on('shown.bs.modal', function () {\n    // workaround \"Copy to clipboard\" .focus() scrolling down to <textarea>\n    // note: doesn't work when <textarea> is completely out of view\n    textarea.setSelectionRange(0,0);\n  });\n}\n\nexports.init = init;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/sharing/export-panel.js\n// module id = 44\n// module chunks = 1","'use strict';\n\n/* global document: false */\nvar docimport = require('./import');\nvar format = require('./format');\nvar _ = require('lodash/fp');\nvar d3 = require('d3');\n\n// Init the import panel and attach event handlers\n// {$dialog: jQuery, gistIDForm: HTMLFormElement, importArgs: Object} -> void\nfunction init(args) {\n  var $dialog = args.$dialog,\n      gistIDForm = args.gistIDForm,\n      importArgs = args.importArgs;\n\n  function hideDialog() {\n    $dialog.modal('hide');\n    // Workaround needed for opening another modal before a modal is done hiding.\n    // Without this, the <body> scrolls instead of the modal:\n    // modal2.show locks body scroll => modal1.hidden unlocks body scroll\n    // while modal2 is still open.\n    var nextDialog = importArgs.dialogNode;\n    $dialog.one('hidden.bs.modal', function () {\n      if (nextDialog.classList.contains('in')) {\n        document.body.classList.add('modal-open');\n      }\n    });\n  }\n\n  // Panel: From GitHub gist\n  gistIDForm.addEventListener('submit', function (e) {\n    e.preventDefault();\n    hideDialog();\n\n    var gistID = gistIDForm.querySelector('input[type=\"text\"]').value;\n    docimport.importGist(_.assign({gistID: gistID}, importArgs));\n  });\n\n  // Panel: From files\n  (function () {\n    // TODO: factor out element IDs and containers into interface\n    var panelBody = document.querySelector('#importFilesPanel > .panel-body');\n    // <input type=\"file\">\n    var fileInput = panelBody.querySelector('input[type=\"file\"]');\n    var importFilesButton = document.getElementById('importFilesButton');\n    importFilesButton.addEventListener('click', function () {\n      hideDialog();\n      docimport.importLocalFiles(_.assign({files: fileInput.files}, importArgs));\n    });\n    // <textarea>\n    var textarea = panelBody.querySelector('textarea');\n    var importContentsButton = document.getElementById('importContentsButton');\n    importContentsButton.parentNode.style.position = 'relative';\n    importContentsButton.addEventListener('click', function (e) {\n      if (importDocumentContents(\n        { containers: {status: e.target.parentNode, details: panelBody },\n          importDocument: importArgs.importDocument },\n        textarea.value\n      )) {\n        textarea.select();\n      }\n    });\n  }());\n}\n\n///////////////////////////////\n// Import from pasted string //\n///////////////////////////////\n\n// () -> HTMLButtonElement\nfunction createCloseIcon() {\n  return d3.select(document.createElement('button'))\n      .attr({class: 'close', 'aria-label': 'Close'})\n      .html('<span aria-hidden=\"true\">&times;</span>')\n    .node();\n}\n\n// Show import outcome (success/failure) and error (if any)\n// ({status: HTMLElement, details: HTMLElement}, ?Error) -> void\nfunction showImportContentOutcome(containers, error) {\n  var statusContainer = d3.select(containers.status),\n      detailsContainer = d3.select(containers.details);\n  statusContainer.selectAll('[role=\"alert\"]').remove();\n  detailsContainer.selectAll('.alert').remove();\n  var status = statusContainer.append('span')\n      .attr({role: 'alert'})\n      .style({\n        position: 'absolute', left: 0, width: '40%', // center between left and button\n        top: '50%', transform: 'translateY(-60%)' // center vertically\n      });\n\n  // () -> string\n  function showErrorDetails() {\n    var details = detailsContainer.append('div')\n        .attr({role: 'alert', class: 'alert alert-danger'})\n        .style('margin-top', '1em');\n    details.append(createCloseIcon)\n        .attr('data-dismiss', 'alert')\n        .on('click', function () {\n          status.remove(); // dismiss details => also dismiss status\n        });\n    if (error instanceof format.YAMLException) {\n      details.append('h4').text('Not valid YAML'); // only \".alert h4\" has margin-top: 0\n      details.append('pre').text(error.message);\n    } else if (error instanceof format.InvalidDocumentError) {\n      details.append('span')\n          .text(error.message.replace(/\\.?$/, '.')); // add period if missing\n    } else {\n      details.append('h4').text('Unexpected error');\n      details.append('pre').text(String(error));\n      return 'Import failed';\n    }\n    return 'Not a valid document';\n  }\n\n  if (error) {\n    var statusSummary = showErrorDetails();\n    status.attr({class: 'text-danger'})\n        .html('<span class=\"glyphicon glyphicon-exclamation-sign\" aria-hidden=\"true\"></span> '\n                + statusSummary);\n  } else {\n    status.attr({class: 'text-success'})\n        .html('<span class=\"glyphicon glyphicon-ok\" aria-hidden=\"true\"></span> '\n                + 'Import succeeded')\n      .transition()\n        .delay(2500)\n        .duration(2000)\n        .style('opacity', 0)\n        .remove();\n  }\n}\n\n// returns true if import succeeded\nfunction importDocumentContents(opts, content) {\n  var containers = opts.containers,\n      importDocument = opts.importDocument;\n\n  var error = (function () {\n    try {\n      importDocument(format.parseDocument(content));\n    } catch (e) {\n      return e;\n    }\n  }());\n  showImportContentOutcome(containers, error);\n  return (error == null);\n}\n\nexports.init = init;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/sharing/import-panel.js\n// module id = 45\n// module chunks = 1","module.exports = Clipboard;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"Clipboard\"\n// module id = 50\n// module chunks = 1"],"sourceRoot":""}